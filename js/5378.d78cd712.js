"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[5378],{71241:function(t,e){e.A=(t,e)=>{const a=t.__vccOpts||t;for(const[s,n]of e)a[s]=n;return a}},10587:function(t,e,a){a.d(e,{A:function(){return u}});var s=a(56768),n=a(24232);const i={class:"toast-content"};function o(t,e,a,o,l,c){return a.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,n.C4)(["toast",`toast-${a.type}`])},[(0,s.Lk)("div",i,(0,n.v_)(a.message),1),(0,s.Lk)("button",{class:"toast-close",onClick:e[0]||(e[0]=(...t)=>c.close&&c.close(...t))},"×")],2)):(0,s.Q3)("",!0)}var l={name:"AppToast",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],watch:{show(t){t&&this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration))}},methods:{close(){this.timer&&clearTimeout(this.timer),this.$emit("close")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},data(){return{timer:null}}},c=a(71241);const r=(0,c.A)(l,[["render",o],["__scopeId","data-v-9f6ec8d0"]]);var u=r},85378:function(t,e,a){a.r(e),a.d(e,{default:function(){return Pe}});var s=a(56768),n=a(24232);const i={class:"nft-bitcat-page"},o={class:"page-header"},l={class:"tabs-container"},c={class:"tabs-navigation"},r=["onClick"],u={key:0,class:"tab-icon"},d={key:1,class:"tab-icon"},p={key:2,class:"tab-icon"},f={key:3,class:"active-indicator"},v={class:"tab-content"},k={key:0,class:"tab-pane"},g={key:1,class:"tab-pane"},m={key:2,class:"tab-pane"};function h(t,e,a,h,w,b){const y=(0,s.g2)("TwitterLinkSection"),L=(0,s.g2)("TwitterPostsList"),T=(0,s.g2)("UserNftsList"),C=(0,s.g2)("RecentMintsList"),I=(0,s.g2)("HowItWorksPopup");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",o,[e[2]||(e[2]=(0,s.Lk)("h1",null,"BITCAT NFT Minting",-1)),e[3]||(e[3]=(0,s.Lk)("p",{class:"subtitle"},"Mint NFTs by retweeting and paying with BITCAT tokens",-1)),(0,s.Lk)("button",{class:"how-it-works-btn",onClick:e[0]||(e[0]=t=>h.showHowItWorks=!0)}," How it works ")]),(0,s.bF)(y),(0,s.Lk)("div",l,[(0,s.Lk)("div",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(h.tabs,((t,a)=>((0,s.uX)(),(0,s.CE)("button",{key:a,onClick:t=>h.activeTab=a,class:(0,n.C4)(["tab-button",{active:h.activeTab===a}])},[0===a?((0,s.uX)(),(0,s.CE)("span",u,e[4]||(e[4]=[(0,s.Lk)("i",{class:"fas fa-fire"},null,-1)]))):1===a?((0,s.uX)(),(0,s.CE)("span",d,e[5]||(e[5]=[(0,s.Lk)("i",{class:"fas fa-wallet"},null,-1)]))):2===a?((0,s.uX)(),(0,s.CE)("span",p,e[6]||(e[6]=[(0,s.Lk)("i",{class:"fas fa-history"},null,-1)]))):(0,s.Q3)("",!0),(0,s.eW)(" "+(0,n.v_)(t.name)+" ",1),h.activeTab===a?((0,s.uX)(),(0,s.CE)("span",f)):(0,s.Q3)("",!0)],10,r)))),128))]),(0,s.Lk)("div",v,[0===h.activeTab?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.bF)(L)])):(0,s.Q3)("",!0),1===h.activeTab?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(T)])):(0,s.Q3)("",!0),2===h.activeTab?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(C)])):(0,s.Q3)("",!0)])]),(0,s.bF)(I,{show:h.showHowItWorks,onClose:e[1]||(e[1]=t=>h.showHowItWorks=!1)},null,8,["show"])])}var w=a(45130);const b={class:"twitter-link-section-wrapper"},y={class:"twitter-link-section-left"},L={key:0,class:"loading"},T={key:1,class:"auth-required"},C={key:2,class:"link-form"},I={class:"input-group"},A=["disabled"],E={key:3,class:"linked-account"},F={class:"linked-info"},N={class:"username"},P=["disabled"],_={class:"twitter-link-section-right"};function M(t,e,a,i,o,l){const c=(0,s.g2)("router-link"),r=(0,s.g2)("AppToast");return(0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("div",y,[e[12]||(e[12]=(0,s.Lk)("h2",null,"Link your Twitter Account",-1)),i.isLoading?((0,s.uX)(),(0,s.CE)("div",L,[e[6]||(e[6]=(0,s.Lk)("p",null,"To mint NFTs with BITCAT tokens, you need to log in first.",-1)),(0,s.bF)(c,{to:"/my",class:"auth-button"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.Lk)("i",{class:"fas fa-sign-in-alt"},null,-1),(0,s.eW)(" Log In ")]))),_:1})])):i.isAuthenticated?i.hasLinkedAccount||i.isLinking?i.hasLinkedAccount?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",F,[(0,s.Lk)("p",null,[e[11]||(e[11]=(0,s.eW)("Linked to ")),(0,s.Lk)("span",N,"@"+(0,n.v_)(i.linkedUsername),1)])]),(0,s.Lk)("button",{class:"unlink-button",onClick:e[3]||(e[3]=(...t)=>i.unlinkAccount&&i.unlinkAccount(...t)),disabled:i.isSubmitting},(0,n.v_)(i.isSubmitting?"Unlinking...":"Unlink Account"),9,P)])):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",C,[e[10]||(e[10]=(0,s.Lk)("p",null,"Just provide your username to mint NFTs",-1)),(0,s.Lk)("div",I,[e[9]||(e[9]=(0,s.Lk)("span",{class:"input-prefix"},"@",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.twitterUsername=t),type:"text",placeholder:"twitter_username",onKeyup:e[1]||(e[1]=(0,w.jR)(((...t)=>i.linkAccount&&i.linkAccount(...t)),["enter"]))},null,544),[[w.Jo,i.twitterUsername]])]),(0,s.Lk)("button",{class:"link-button",onClick:e[2]||(e[2]=(...t)=>i.linkAccount&&i.linkAccount(...t)),disabled:i.isSubmitting},(0,n.v_)(i.isSubmitting?"Linking...":"Link Account"),9,A)])):((0,s.uX)(),(0,s.CE)("div",T,[e[8]||(e[8]=(0,s.Lk)("p",null,"To mint NFTs with BITCAT tokens, you need to log in first.",-1)),(0,s.bF)(c,{to:"/my",class:"auth-button"},{default:(0,s.k6)((()=>e[7]||(e[7]=[(0,s.Lk)("i",{class:"fas fa-sign-in-alt"},null,-1),(0,s.eW)(" Log In ")]))),_:1})])),(0,s.bF)(r,{show:i.toast.show,message:i.toast.message,type:i.toast.type,onClose:e[4]||(e[4]=t=>i.toast.show=!1),duration:i.toast.duration},null,8,["show","message","type","duration"])]),(0,s.Lk)("div",_,[e[14]||(e[14]=(0,s.Lk)("h2",null,"Go to NFT Rental Market",-1)),(0,s.bF)(c,{to:"/nft-rental",class:"rental-market-button"},{default:(0,s.k6)((()=>e[13]||(e[13]=[(0,s.Lk)("i",{class:"fas fa-store"},null,-1),(0,s.eW)(" NFT Rental ")]))),_:1})])])}var X=a(90144),R=a(4249),K=a(10587),S=a(94348),W={name:"TwitterLinkSection",components:{AppToast:K.A},setup(){const t=(0,R.Pj)(),e=(0,X.KR)(""),a=(0,X.KR)(!1),n=(0,X.KR)(!0),i=(0,X.KR)(!1),o=(0,s.EW)((()=>t.state.session.isAuthenticated)),l=(0,s.EW)((()=>t.getters.isTwitterLinked)),c=(0,s.EW)((()=>t.getters.twitterUsername)),r=(0,X.KR)({show:!1,message:"",type:"info",duration:7e3}),u=(t,e="info")=>{r.value.message=t,r.value.type=e,r.value.show=!0},d=async()=>{if(n.value=!0,o.value)try{await t.dispatch("checkTwitterLinked")}catch(e){S.error("Error checking linked account:",e)}finally{n.value=!1}else n.value=!1},p=async()=>{if(!e.value.trim())return u("Please enter a Twitter username","error");a.value=!0;try{const a=await t.dispatch("linkTwitterAccount",e.value.trim());a.success?(u("Twitter account successfully linked!","success"),e.value=""):u(a.message||"Failed to link Twitter account","error")}catch(s){S.error("Error linking account:",s),u("Error linking Twitter account","error")}finally{a.value=!1}},f=async()=>{if(l.value){a.value=!0;try{const e=await t.dispatch("unlinkTwitterAccount");e.success?u("Twitter account successfully unlinked!","success"):u(e.message||"Failed to unlink Twitter account","error")}catch(e){S.error("Error unlinking account:",e),u("Error unlinking Twitter account","error")}finally{a.value=!1}}};return(0,s.sV)((()=>{o.value?d():n.value=!1})),{twitterUsername:e,hasLinkedAccount:l,linkedUsername:c,isAuthenticated:o,isSubmitting:a,isLoading:n,isLinking:i,linkAccount:p,unlinkAccount:f,toast:r}}},U=a(71241);const x=(0,U.A)(W,[["render",M],["__scopeId","data-v-54968701"]]);var B=x;const $={class:"twitter-posts-section"},Q={class:"section-header"},D={class:"next-check-info"},V={class:"time"},H={key:0,class:"loading"},j={key:1,class:"no-posts"},q={key:2,class:"posts-grid"},z={class:"post-image"},Y=["src","alt","onClick"],G={key:0,class:"active-badge"},J={class:"post-content"},O={key:0,class:"post-description"},Z=["href"],tt={class:"post-meta"},et={class:"meta-item"},at={class:"time-value"},st={class:"meta-stats"},nt={class:"stat-item"},it={class:"stat-item"},ot={class:"post-actions"},lt=["onClick","disabled"],ct={key:0},rt={key:1},ut={key:2},dt={key:1,disabled:"",class:"already-minted-btn"},pt=["onClick","disabled"],ft={class:"image-popup-content"},vt=["src","alt"];function kt(t,e,a,i,o,l){const c=(0,s.g2)("AppToast"),r=(0,s.g2)("MintPopup");return(0,s.uX)(),(0,s.CE)("div",$,[(0,s.Lk)("div",Q,[e[3]||(e[3]=(0,s.Lk)("h2",null,"NFTs for Minting",-1)),(0,s.Lk)("div",D,[e[2]||(e[2]=(0,s.Lk)("span",null,"Next retweets check: ",-1)),(0,s.Lk)("span",V,(0,n.v_)(i.formatNextCheckTime),1)])]),i.isLoading?((0,s.uX)(),(0,s.CE)("div",H,e[4]||(e[4]=[(0,s.Lk)("p",null,"Loading posts...",-1)]))):0===i.posts.length?((0,s.uX)(),(0,s.CE)("div",j,e[5]||(e[5]=[(0,s.Lk)("p",null,"No posts available for minting at the moment.",-1)]))):((0,s.uX)(),(0,s.CE)("div",q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.posts,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.postId,class:"post-card"},[(0,s.Lk)("div",z,[(0,s.Lk)("img",{src:t.imageUrl,alt:t.title,onClick:e=>i.openImagePopup(t.imageUrl,t.title),class:"clickable-image"},null,8,Y),t.isActive?((0,s.uX)(),(0,s.CE)("div",G,"Active for Retweets")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",J,[(0,s.Lk)("h3",null,(0,n.v_)(t.title),1),t.description?((0,s.uX)(),(0,s.CE)("p",O,(0,n.v_)(t.description),1)):(0,s.Q3)("",!0),(0,s.Lk)("a",{href:t.twitterUrl,target:"_blank",rel:"noopener noreferrer",class:"twitter-link"},e[6]||(e[6]=[(0,s.Lk)("i",{class:"fab fa-twitter"},null,-1),(0,s.eW)(" View on Twitter ")]),8,Z),(0,s.Lk)("div",tt,[(0,s.Lk)("div",et,[e[7]||(e[7]=(0,s.Lk)("span",{class:"label"},"Retweets are accepted until:",-1)),(0,s.Lk)("div",at,(0,n.v_)(i.formatDate(t.endMintingTime)),1)]),(0,s.Lk)("div",st,[(0,s.Lk)("div",nt,[e[8]||(e[8]=(0,s.Lk)("span",{class:"label"},"Retweets:",-1)),(0,s.Lk)("span",null,(0,n.v_)(t.totalRetweets),1)]),(0,s.Lk)("div",it,[e[9]||(e[9]=(0,s.Lk)("span",{class:"label"},"Minted:",-1)),(0,s.Lk)("span",null,(0,n.v_)(t.mintedCount||0),1)])])]),(0,s.Lk)("div",ot,[t.alreadyMinted&&i.hasMinted[t.postId]?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>i.checkRetweet(t.postId),disabled:i.isCheckingRetweet===t.postId||i.hasMinted[t.postId]||t.alreadyMinted||!0===i.canMint[t.postId],class:"check-btn"},[i.isCheckingRetweet===t.postId?((0,s.uX)(),(0,s.CE)("span",ct,"Checking...")):!0===i.canMint[t.postId]?((0,s.uX)(),(0,s.CE)("span",rt,"Retweet Verified ✓")):((0,s.uX)(),(0,s.CE)("span",ut,"Check My Retweet"))],8,lt)),t.alreadyMinted?((0,s.uX)(),(0,s.CE)("button",dt," Already minted ✓ ")):void 0!==i.canMint[t.postId]&&i.canMint[t.postId]?((0,s.uX)(),(0,s.CE)("button",{key:2,onClick:e=>i.mintNft(t.postId),disabled:i.isMinting===t.postId,class:"mint-btn"},(0,n.v_)(i.isMinting===t.postId?"Minting...":"Mint NFT (50K BITCAT)"),9,pt)):(0,s.Q3)("",!0)])])])))),128))])),(0,s.bF)(c,{show:i.toast.show,message:i.toast.message,type:i.toast.type,onClose:e[0]||(e[0]=t=>i.toast.show=!1),duration:i.toast.duration},null,8,["show","message","type","duration"]),(0,s.bF)(r,{show:i.mintPopup.show,"tx-signature":i.mintPopup.txSignature,"is-complete":i.mintPopup.isComplete,"nft-info":i.mintPopup.nftInfo,onClose:i.closeMintPopup},null,8,["show","tx-signature","is-complete","nft-info","onClose"]),i.imagePopup.show?((0,s.uX)(),(0,s.CE)("div",{key:3,class:"image-popup",onClick:e[1]||(e[1]=(...t)=>i.closeImagePopup&&i.closeImagePopup(...t))},[(0,s.Lk)("div",ft,[(0,s.Lk)("img",{src:i.imagePopup.url,alt:i.imagePopup.alt},null,8,vt)])])):(0,s.Q3)("",!0)])}a(98992),a(72577),a(3949),a(8872);var gt=a(86659);const mt={key:0,class:"mint-popup-overlay"},ht={class:"mint-popup-content"},wt={class:"mint-popup-header"},bt={class:"mint-popup-body"},yt={key:0,class:"minting-progress"},Lt={class:"transaction-info"},Tt={class:"tx-id"},Ct={key:1,class:"minting-complete"},It={key:0,class:"nft-image-container"},At=["src"],Et={class:"nft-details"},Ft={class:"tx-id"},Nt={class:"asset-id"},Pt={class:"view-links"},_t=["href"];function Mt(t,e,a,i,o,l){const c=(0,s.g2)("router-link");return a.show?((0,s.uX)(),(0,s.CE)("div",mt,[(0,s.Lk)("div",ht,[(0,s.Lk)("div",wt,[(0,s.Lk)("h2",null,(0,n.v_)(a.isComplete?"NFT Successfully Minted!":"NFT Minting in Progress"),1),a.isComplete?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"close-button",onClick:e[0]||(e[0]=(...t)=>l.close&&l.close(...t))},"×")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",bt,[a.isComplete?((0,s.uX)(),(0,s.CE)("div",Ct,[e[10]||(e[10]=(0,s.Lk)("div",{class:"success-icon"},"✓",-1)),(0,s.Lk)("h3",null,(0,n.v_)(a.nftInfo.name),1),a.nftInfo.imageUri?((0,s.uX)(),(0,s.CE)("div",It,[(0,s.Lk)("img",{src:a.nftInfo.imageUri,alt:"NFT Image",class:"nft-image"},null,8,At)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Et,[(0,s.Lk)("p",null,[e[4]||(e[4]=(0,s.Lk)("strong",null,"Transaction ID:",-1)),e[5]||(e[5]=(0,s.eW)()),(0,s.Lk)("span",Ft,(0,n.v_)(a.txSignature),1)]),(0,s.Lk)("p",null,[e[6]||(e[6]=(0,s.Lk)("strong",null,"Asset ID:",-1)),e[7]||(e[7]=(0,s.eW)()),(0,s.Lk)("span",Nt,(0,n.v_)(a.nftInfo.assetPublicKey),1)])]),(0,s.Lk)("div",Pt,[(0,s.bF)(c,{to:`/nft/${a.nftInfo.assetPublicKey}`,class:"view-link"},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.Lk)("i",{class:"fas fa-eye"},null,-1),(0,s.eW)(" View NFT Details ")]))),_:1},8,["to"]),(0,s.Lk)("a",{href:`https://core.metaplex.com/explorer/${a.nftInfo.assetPublicKey}`,target:"_blank",class:"view-link"},e[9]||(e[9]=[(0,s.Lk)("i",{class:"fas fa-external-link-alt"},null,-1),(0,s.eW)(" View on Metaplex ")]),8,_t)])])):((0,s.uX)(),(0,s.CE)("div",yt,[e[2]||(e[2]=(0,s.Lk)("div",{class:"spinner"},null,-1)),e[3]||(e[3]=(0,s.Lk)("p",{class:"warning-text"},"Please do not close this window. Minting process may take several minutes.",-1)),(0,s.Lk)("p",Lt,[e[1]||(e[1]=(0,s.eW)("Transaction ID: ")),(0,s.Lk)("span",Tt,(0,n.v_)(a.txSignature),1)])]))])])])):(0,s.Q3)("",!0)}var Xt={name:"MintPopup",props:{show:{type:Boolean,default:!1},txSignature:{type:String,default:""},isComplete:{type:Boolean,default:!1},nftInfo:{type:Object,default:()=>({name:"",assetPublicKey:"",imageUri:"",metadataUri:""})}},methods:{close(){this.$emit("close")}}};const Rt=(0,U.A)(Xt,[["render",Mt],["__scopeId","data-v-72ade709"]]);var Kt=Rt,St=a(75290),Wt=a(94373),Ut=a(94348),xt=a(90712)["Buffer"],Bt={name:"TwitterPostsList",components:{AppToast:K.A,MintPopup:Kt},setup(){(0,gt.vT)();const t=(0,R.Pj)(),e=(0,X.KR)({show:!1,url:"",alt:""}),a=(0,X.KR)([]),n=(0,X.KR)(!0),i=(0,X.KR)(null),o=(0,X.KR)(null),l=(0,X.KR)({}),c=(0,X.KR)(null),r=(0,X.KR)({}),u=(0,X.KR)({show:!1,txSignature:"",isComplete:!1,nftInfo:{}}),d=(0,X.KR)({show:!1,message:"",type:"info",duration:1e4}),p=(0,s.EW)((()=>t.state.session.isAuthenticated)),f=(0,s.EW)((()=>t.getters.isTwitterLinked)),v=(t,e="info")=>{d.value.message=t,d.value.type=e,d.value.show=!0},k=(0,s.EW)((()=>{if(!i.value)return"Unknown";const t=new Date(i.value),e=new Date(t.getTime()+12e5);return g(e)})),g=t=>{const e=new Date(t);return e.toLocaleString()},m=async()=>{n.value=!0;try{const t=localStorage.getItem("userTag");Ut.log("User tag from localStorage:",t);let e="/nft-bitcat/twitter-posts";t&&(e+=`?userTag=${encodeURIComponent(t)}`),Ut.log("Fetching posts with URL:",e);const s=await Wt.A.get(e),n=s.data;if(n.success){a.value=n.posts;const t=a.value.reduce(((t,e)=>{if(!e.lastCheckTime)return t;const a=new Date(e.lastCheckTime);return!t||a>t?a:t}),null);i.value=t,a.value.forEach((t=>{Ut.log(`Post ${t.postId} has retweeted:`,t.hasRetweeted),Ut.log(`Post ${t.postId} can mint:`,t.canMint),Ut.log(`Post ${t.postId} already minted:`,t.alreadyMinted),t.alreadyMinted&&(r.value[t.postId]=!0),!0!==t.hasRetweeted||t.alreadyMinted?void 0===l.value[t.postId]&&(l.value[t.postId]=!1):(l.value[t.postId]=!0,Ut.log(`Setting canMint for post ${t.postId} to true`))}))}}catch(t){Ut.error("Error fetching posts:",t),v("Failed to load Twitter posts","error")}finally{n.value=!1}},h=async e=>{if(!y())return v("Please log in to check your retweet status","warning");if(!f.value)return v("Please link your Twitter account first","warning");if(!t.getters.hasWallet)return v("Please connect your wallet to mint NFTs","warning");const s=a.value.find((t=>t.postId===e));if(s&&s.alreadyMinted)return v("You have already minted an NFT for this post","info");o.value=e;try{const t=await Wt.A.get(`/twitter/check-retwit/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),a=t.data;a.success?(l.value[e]=a.canMint,a.canMint?v("You can mint an NFT for this post!","success"):v("You need to retweet this post to mint an NFT","warning")):v(a.message||"Failed to check retweet","error")}catch(n){Ut.error("Error checking retweet:",n),v("Error checking retweet status","error")}finally{o.value=null}},w=async e=>{if(!y())return v("Please log in to mint an NFT","warning");if(!f.value)return v("Please link your Twitter account first","warning");if(!t.getters.hasWallet)return v("Please connect your wallet first","warning");const s=a.value.find((t=>t.postId===e));if(s&&s.alreadyMinted)return v("You have already minted an NFT for this post","info");c.value=e;try{if(!window.solana)return void v("Please install Phantom Wallet extension","error");if(!window.solana.isConnected)try{await window.solana.connect()}catch(i){return v(`Error connecting to Phantom Wallet: ${i.message}`,"error"),void(n.value=!1)}const t=window.solana.publicKey.toString(),a=new St.Connection("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c","confirmed"),o=await Wt.A.post("/nft-bitcat/mint",{tweetId:e,walletPublicKey:t},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),l=o.data;if(Ut.log(o),l.success){const t=window.solana,n=St.Transaction.from(xt.from(l.transaction,"base64")),{blockhash:i}=await a.getLatestBlockhash("confirmed");n.recentBlockhash=i,n.feePayer=t.publicKey,Ut.log(`Mint will use ${l.bitcatAmount} BITCAT tokens`);const o={skipPreflight:!1,preflightCommitment:"confirmed"},c=await t.signTransaction(n),d=await a.sendRawTransaction(c.serialize(),o);u.value={show:!0,txSignature:d,isComplete:!1,nftInfo:{name:s?.title||"Bitcat NFT",assetPublicKey:l.expectedNftAddress||"",imageUri:s?.imageUrl||""}},await a.confirmTransaction(d,"confirmed");const p=await Wt.A.post("/nft-bitcat/update-tx",{txSignature:d,assetPublicKey:t.publicKey.toString(),postId:e,metadataUri:l.metadataUri},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});p.data.success?(p.data.nftInfo&&(u.value.nftInfo=p.data.nftInfo),u.value.isComplete=!0,s.alreadyMinted=!0,r.value[e]=!0,v("NFT successfully minted!","success")):v("Error updating NFT status","error")}else v(l.message||"Error preparing data for minting","error")}catch(o){Ut.error("Error minting NFT:",o),v(`Error minting NFT: ${o.message}`,"error"),u.value.show&&(u.value.show=!1)}finally{c.value=null}},b=()=>{u.value.show=!1},y=(new St.Connection("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c"),()=>p.value);(0,s.sV)((async()=>{p.value&&await t.dispatch("checkTwitterLinked"),m()})),(0,s.wB)((()=>t.state.session.isAuthenticated),(e=>{e&&t.dispatch("checkTwitterLinked")})),(0,s.wB)((()=>t.getters.isTwitterLinked),(t=>{Ut.log("Twitter link status changed:",t),t&&m()}));const L=(t,a)=>{e.value={show:!0,url:t,alt:a}},T=()=>{e.value.show=!1};return{posts:a,isLoading:n,isCheckingRetweet:o,isMinting:c,canMint:l,hasMinted:r,mintPopup:u,imagePopup:e,closeMintPopup:b,checkRetweet:h,mintNft:w,formatNextCheckTime:k,formatDate:g,toast:d,isAuthenticated:p,hasLinkedTwitter:f,openImagePopup:L,closeImagePopup:T}}};const $t=(0,U.A)(Bt,[["render",kt],["__scopeId","data-v-1cd8c587"]]);var Qt=$t;const Dt={class:"user-nfts-section"},Vt={key:0,class:"info-message"},Ht={key:1,class:"info-message"},jt={key:2,class:"info-message"},qt={key:3,class:"info-message"},zt={key:4,class:"nfts-grid"},Yt={class:"nft-image-container"},Gt=["src","alt"],Jt={class:"nft-info"},Ot={class:"nft-actions"};function Zt(t,e,a,i,o,l){const c=(0,s.g2)("router-link"),r=(0,s.g2)("AppToast");return(0,s.uX)(),(0,s.CE)("div",Dt,[e[1]||(e[1]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"Your Minted NFTs")],-1)),i.isAuthenticated?i.loading?((0,s.uX)(),(0,s.CE)("p",Ht,"Loading your NFTs...")):i.error?((0,s.uX)(),(0,s.CE)("p",jt,(0,n.v_)(i.error),1)):0===i.nfts.length?((0,s.uX)(),(0,s.CE)("p",qt,"You haven't minted any NFTs yet.")):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",Vt,"You need to login first")),i.isAuthenticated&&!i.loading&&!i.error&&i.nfts.length>0?((0,s.uX)(),(0,s.CE)("div",zt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.nfts,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.assetPublicKey,class:"nft-card"},[(0,s.Lk)("div",Yt,[(0,s.Lk)("img",{src:t.imageUri,alt:t.name,class:"nft-image"},null,8,Gt)]),(0,s.Lk)("div",Jt,[(0,s.Lk)("h3",null,(0,n.v_)(t.name),1),(0,s.Lk)("p",{class:(0,n.C4)(["nft-status",i.getStatusClass(t.status)])},(0,n.v_)(t.status.charAt(0).toUpperCase()+t.status.slice(1)),3),(0,s.Lk)("div",Ot,[(0,s.bF)(c,{to:`/nft/${t.assetPublicKey}`,class:"view-button"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)(" View Details ")]))),_:2},1032,["to"])])])])))),128))])):(0,s.Q3)("",!0),i.toast.show?((0,s.uX)(),(0,s.Wv)(r,{key:5,message:i.toast.message,type:i.toast.type,duration:i.toast.duration},null,8,["message","type","duration"])):(0,s.Q3)("",!0)])}var te=a(94348),ee={name:"UserNftsList",components:{AppToast:K.A},setup(){const t=(0,R.Pj)(),e=(0,X.KR)([]),a=(0,X.KR)(!0),n=(0,X.KR)(null),i=(0,s.EW)((()=>t.state.session.isAuthenticated)),o=(t,e="info")=>{l.value.message=t,l.value.type=e,l.value.show=!0},l=(0,X.KR)({show:!1,message:"",type:"info",duration:7e3}),c=async()=>{if(i.value){a.value=!0,n.value=null;try{const t=await Wt.A.get("/nft-bitcat/user-nfts",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});t.data.success?e.value=t.data.nfts||[]:(n.value=t.data.message||"Failed to load your NFTs",o(n.value,"error"))}catch(t){te.error("Error fetching user NFTs:",t),n.value=t.response?.data?.message||"An error occurred while fetching your NFTs",o(n.value,"error")}finally{a.value=!1}}else a.value=!1},r=t=>{switch(t){case"completed":return"status-completed";case"pending":return"status-pending";case"failed":return"status-failed";default:return""}};return(0,s.sV)((()=>{i.value?c():a.value=!1})),{nfts:e,loading:a,error:n,isAuthenticated:i,getStatusClass:r,toast:l,showToast:o}}};const ae=(0,U.A)(ee,[["render",Zt],["__scopeId","data-v-4c8609c2"]]);var se=ae;const ne={class:"recent-mints-section"},ie={key:0,class:"info-message"},oe={key:1,class:"info-message"},le={key:2,class:"info-message"},ce={key:3,class:"nfts-list"},re={class:"nft-image-container"},ue=["src","alt"],de={class:"nft-info"},pe={key:0,class:"nft-minted-by"},fe={class:"nft-date"},ve={class:"nft-actions"};function ke(t,e,a,i,o,l){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",ne,[e[2]||(e[2]=(0,s.Lk)("div",{class:"section-header"},[(0,s.Lk)("h2",null,"Recent 20 Mints")],-1)),i.loading?((0,s.uX)(),(0,s.CE)("p",ie,"Loading recent mints...")):i.error?((0,s.uX)(),(0,s.CE)("p",oe,(0,n.v_)(i.error),1)):0===i.nfts.length?((0,s.uX)(),(0,s.CE)("p",le,"No recent mints found.")):(0,s.Q3)("",!0),!i.loading&&!i.error&&i.nfts.length>0?((0,s.uX)(),(0,s.CE)("div",ce,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.nfts,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.assetPublicKey,class:"nft-item"},[(0,s.Lk)("div",re,[(0,s.Lk)("img",{src:t.imageUri,alt:t.name,class:"nft-image"},null,8,ue)]),(0,s.Lk)("div",de,[(0,s.Lk)("h3",null,(0,n.v_)(t.name),1),t.userTag?((0,s.uX)(),(0,s.CE)("p",pe,[e[0]||(e[0]=(0,s.eW)(" Minted by: ")),(0,s.bF)(c,{to:`/player-nfts/${t.userTag}`},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(t.userTag),1)])),_:2},1032,["to"])])):(0,s.Q3)("",!0),(0,s.Lk)("p",fe,(0,n.v_)(i.formatDate(t.createdAt)),1),(0,s.Lk)("div",ve,[(0,s.bF)(c,{to:`/nft/${t.assetPublicKey}`,class:"view-button"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)(" View Details ")]))),_:2},1032,["to"])])])])))),128))])):(0,s.Q3)("",!0)])}var ge=a(94348),me={name:"RecentMintsList",setup(){const t=(0,X.KR)([]),e=(0,X.KR)(!0),a=(0,X.KR)(null),n=async()=>{e.value=!0,a.value=null;try{const e=await Wt.A.get("/nft-bitcat/recent-mints");e.data.success?t.value=e.data.nfts||[]:a.value=e.data.message||"Failed to load recent mints"}catch(s){ge.error("Error fetching recent mints:",s),a.value=s.response?.data?.message||"An error occurred while fetching recent mints"}finally{e.value=!1}},i=t=>{const e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,s.sV)((()=>{n()})),{nfts:t,loading:e,error:a,formatDate:i}}};const he=(0,U.A)(me,[["render",ke],["__scopeId","data-v-0ade051a"]]);var we=he;const be={key:0,class:"how-it-works-popup"},ye={class:"popup-content"},Le={class:"popup-header"},Te={class:"popup-footer"};function Ce(t,e,a,n,i,o){return a.show?((0,s.uX)(),(0,s.CE)("div",be,[(0,s.Lk)("div",{class:"popup-overlay",onClick:e[0]||(e[0]=e=>t.$emit("close"))}),(0,s.Lk)("div",ye,[(0,s.Lk)("div",Le,[e[3]||(e[3]=(0,s.Lk)("h2",null,[(0,s.Lk)("i",{class:"fas fa-info-circle"}),(0,s.eW)(" How BITCAT NFT Minting Works")],-1)),(0,s.Lk)("button",{class:"close-button",onClick:e[1]||(e[1]=e=>t.$emit("close"))},"×")]),e[5]||(e[5]=(0,s.Fv)('<div class="popup-body" data-v-cd777fb4><div class="info-block" data-v-cd777fb4><div class="block-header" data-v-cd777fb4><i class="fas fa-rocket" data-v-cd777fb4></i><h3 data-v-cd777fb4>Getting Started with BITCAT NFTs</h3></div><div class="block-content" data-v-cd777fb4><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Twitter Required:</strong> To mint NFTs, you need to enter your Twitter username. This allows us to verify that you&#39;ve retweeted the post, which unlocks the ability to mint specific NFTs.</p></div><div class="info-item highlight-box" data-v-cd777fb4><div class="highlight-header" data-v-cd777fb4><i class="fas fa-question-circle" data-v-cd777fb4></i><h4 data-v-cd777fb4>Why Retweet?</h4></div><p data-v-cd777fb4>Retweeting helps attract more crypto enthusiasts to the BITCAT project, growing our community and increasing the value of your NFTs. It&#39;s a win-win for everyone!</p></div></div></div><div class="info-block" data-v-cd777fb4><div class="block-header" data-v-cd777fb4><i class="fas fa-cogs" data-v-cd777fb4></i><h3 data-v-cd777fb4>Technical Details &amp; Security</h3></div><div class="block-content" data-v-cd777fb4><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Decentralized Storage:</strong> All NFTs are stored on <strong data-v-cd777fb4>Irys</strong> (formerly Arweave), a decentralized storage network that ensures your data remains accessible forever.</p></div><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Immutable Metadata:</strong> After minting, you receive full ownership rights to your NFT. The metadata is <span class="highlight-text" data-v-cd777fb4>immutable</span>, guaranteeing that the unique attributes of each NFT cannot be changed.</p></div><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Payment Method:</strong> To mint an NFT, you need to pay with BITCAT tokens. All funds collected will be used exclusively for project promotion and development.</p></div></div></div><div class="info-block" data-v-cd777fb4><div class="block-header" data-v-cd777fb4><i class="fas fa-gem" data-v-cd777fb4></i><h3 data-v-cd777fb4>NFT Attributes &amp; Ecosystem Value</h3></div><div class="block-content" data-v-cd777fb4><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4>Each NFT is minted with unique attributes that affect its value within our developing ecosystem:</p><ul class="features-list" data-v-cd777fb4><li data-v-cd777fb4><i class="fas fa-trophy" data-v-cd777fb4></i> <strong data-v-cd777fb4>Lottery Participation</strong> - Use your NFTs in our upcoming lottery system</li><li data-v-cd777fb4><i class="fas fa-gamepad" data-v-cd777fb4></i> <strong data-v-cd777fb4>Crypto Duel</strong> - Battle your NFTs against others in our game</li><li data-v-cd777fb4><i class="fas fa-chart-line" data-v-cd777fb4></i> <strong data-v-cd777fb4>Ecosystem Value</strong> - Unique attributes determine rarity and utility</li><li data-v-cd777fb4><i class="fas fa-random" data-v-cd777fb4></i> <strong data-v-cd777fb4>Random Assignment</strong> - All attributes are assigned randomly at minting</li></ul></div><div class="info-item highlight-box important" data-v-cd777fb4><div class="highlight-header" data-v-cd777fb4><i class="fas fa-exclamation-circle" data-v-cd777fb4></i><h4 data-v-cd777fb4>Important to Remember</h4></div><p data-v-cd777fb4>The rarity and unique combination of attributes in your NFT directly impacts its utility and value in the BITCAT ecosystem. Each NFT is truly one-of-a-kind!</p></div></div></div></div>',1)),(0,s.Lk)("div",Te,[(0,s.Lk)("button",{class:"close-btn",onClick:e[2]||(e[2]=e=>t.$emit("close"))},e[4]||(e[4]=[(0,s.Lk)("i",{class:"fas fa-check"},null,-1),(0,s.eW)(" Got it! ")]))])])])):(0,s.Q3)("",!0)}var Ie={name:"HowItWorksPopup",props:{show:{type:Boolean,default:!1}},emits:["close"]};const Ae=(0,U.A)(Ie,[["render",Ce],["__scopeId","data-v-cd777fb4"]]);var Ee=Ae,Fe={name:"NftBitcatPage",components:{TwitterLinkSection:B,TwitterPostsList:Qt,UserNftsList:se,RecentMintsList:we,HowItWorksPopup:Ee},setup(){const t=(0,X.KR)(0),e=(0,X.KR)(!1),a=[{name:"Available",component:"TwitterPostsList"},{name:"My NFTs",component:"UserNftsList"},{name:"Mint History",component:"RecentMintsList"}];return(0,s.sV)((()=>{const e=localStorage.getItem("nft-bitcat-page-tab");null!==e&&(t.value=parseInt(e))})),(0,s.wB)(t,(t=>{localStorage.setItem("nft-bitcat-page-tab",t.toString())})),{activeTab:t,tabs:a,showHowItWorks:e}}};const Ne=(0,U.A)(Fe,[["render",h],["__scopeId","data-v-e8192248"]]);var Pe=Ne}}]);
//# sourceMappingURL=5378.d78cd712.js.map