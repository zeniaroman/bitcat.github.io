"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[415],{5415:function(e,t,a){a.r(t),a.d(t,{default:function(){return It}});var n=a(4061);const o={class:"nft-bitcat-page"},s={class:"page-header"},i={class:"tabs-container"},c={class:"tabs-navigation"},l=["onClick"],r={key:0,class:"tab-icon"},d={key:1,class:"tab-icon"},u={key:2,class:"tab-icon"},m={key:3,class:"active-indicator"},p={class:"tab-content"},f={key:0,class:"tab-pane"},v={key:1,class:"tab-pane"},g={key:2,class:"tab-pane"};function k(e,t,a,k,h,y){const w=(0,n.resolveComponent)("TwitterLinkSection"),N=(0,n.resolveComponent)("TwitterPostsList"),b=(0,n.resolveComponent)("UserNftsList"),E=(0,n.resolveComponent)("RecentMintsList"),T=(0,n.resolveComponent)("HowItWorksPopup");return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",s,[t[2]||(t[2]=(0,n.createElementVNode)("h1",null,"BITCAT NFT Minting",-1)),t[3]||(t[3]=(0,n.createElementVNode)("p",{class:"subtitle"},"Mint NFTs by retweeting and paying with BITCAT tokens",-1)),(0,n.createElementVNode)("button",{class:"how-it-works-btn",onClick:t[0]||(t[0]=e=>k.showHowItWorks=!0)}," How it works ")]),(0,n.createVNode)(w),(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",c,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(k.tabs,((e,a)=>((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:a,onClick:e=>k.activeTab=a,class:(0,n.normalizeClass)(["tab-button",{active:k.activeTab===a}])},[0===a?((0,n.openBlock)(),(0,n.createElementBlock)("span",r,t[4]||(t[4]=[(0,n.createElementVNode)("i",{class:"fas fa-fire"},null,-1)]))):1===a?((0,n.openBlock)(),(0,n.createElementBlock)("span",d,t[5]||(t[5]=[(0,n.createElementVNode)("i",{class:"fas fa-wallet"},null,-1)]))):2===a?((0,n.openBlock)(),(0,n.createElementBlock)("span",u,t[6]||(t[6]=[(0,n.createElementVNode)("i",{class:"fas fa-history"},null,-1)]))):(0,n.createCommentVNode)("",!0),(0,n.createTextVNode)(" "+(0,n.toDisplayString)(e.name)+" ",1),k.activeTab===a?((0,n.openBlock)(),(0,n.createElementBlock)("span",m)):(0,n.createCommentVNode)("",!0)],10,l)))),128))]),(0,n.createElementVNode)("div",p,[0===k.activeTab?((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[(0,n.createVNode)(N)])):(0,n.createCommentVNode)("",!0),1===k.activeTab?((0,n.openBlock)(),(0,n.createElementBlock)("div",v,[(0,n.createVNode)(b)])):(0,n.createCommentVNode)("",!0),2===k.activeTab?((0,n.openBlock)(),(0,n.createElementBlock)("div",g,[(0,n.createVNode)(E)])):(0,n.createCommentVNode)("",!0)])]),(0,n.createVNode)(T,{show:k.showHowItWorks,onClose:t[1]||(t[1]=e=>k.showHowItWorks=!1)},null,8,["show"])])}const h={class:"twitter-link-section"},y={key:0,class:"loading"},w={key:1,class:"auth-required"},N={key:2,class:"link-form"},b={class:"input-group"},E=["disabled"],T={key:3,class:"linked-account"},V={class:"linked-info"},B={class:"username"},C=["disabled"];function I(e,t,a,o,s,i){const c=(0,n.resolveComponent)("router-link"),l=(0,n.resolveComponent)("AppToast");return(0,n.openBlock)(),(0,n.createElementBlock)("div",h,[t[12]||(t[12]=(0,n.createElementVNode)("h2",null,"Link your Twitter Account",-1)),o.isLoading?((0,n.openBlock)(),(0,n.createElementBlock)("div",y,[t[6]||(t[6]=(0,n.createElementVNode)("p",null,"To mint NFTs with BITCAT tokens, you need to log in first.",-1)),(0,n.createVNode)(c,{to:"/my",class:"auth-button"},{default:(0,n.withCtx)((()=>t[5]||(t[5]=[(0,n.createElementVNode)("i",{class:"fas fa-sign-in-alt"},null,-1),(0,n.createTextVNode)(" Log In ")]))),_:1})])):o.isAuthenticated?o.hasLinkedAccount||o.isLinking?o.hasLinkedAccount?((0,n.openBlock)(),(0,n.createElementBlock)("div",T,[(0,n.createElementVNode)("div",V,[(0,n.createElementVNode)("p",null,[t[11]||(t[11]=(0,n.createTextVNode)("Linked to ")),(0,n.createElementVNode)("span",B,"@"+(0,n.toDisplayString)(o.linkedUsername),1)])]),(0,n.createElementVNode)("button",{class:"unlink-button",onClick:t[3]||(t[3]=(...e)=>o.unlinkAccount&&o.unlinkAccount(...e)),disabled:o.isSubmitting},(0,n.toDisplayString)(o.isSubmitting?"Unlinking...":"Unlink Account"),9,C)])):(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",N,[t[10]||(t[10]=(0,n.createElementVNode)("p",null,"Link your Twitter username to mint NFTs with BITCAT tokens.",-1)),(0,n.createElementVNode)("div",b,[t[9]||(t[9]=(0,n.createElementVNode)("span",{class:"input-prefix"},"@",-1)),(0,n.withDirectives)((0,n.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.twitterUsername=e),type:"text",placeholder:"twitter_username",onKeyup:t[1]||(t[1]=(0,n.withKeys)(((...e)=>o.linkAccount&&o.linkAccount(...e)),["enter"]))},null,544),[[n.vModelText,o.twitterUsername]])]),(0,n.createElementVNode)("button",{class:"link-button",onClick:t[2]||(t[2]=(...e)=>o.linkAccount&&o.linkAccount(...e)),disabled:o.isSubmitting},(0,n.toDisplayString)(o.isSubmitting?"Linking...":"Link Account"),9,E)])):((0,n.openBlock)(),(0,n.createElementBlock)("div",w,[t[8]||(t[8]=(0,n.createElementVNode)("p",null,"To mint NFTs with BITCAT tokens, you need to log in first.",-1)),(0,n.createVNode)(c,{to:"/my",class:"auth-button"},{default:(0,n.withCtx)((()=>t[7]||(t[7]=[(0,n.createElementVNode)("i",{class:"fas fa-sign-in-alt"},null,-1),(0,n.createTextVNode)(" Log In ")]))),_:1})])),(0,n.createVNode)(l,{show:o.toast.show,message:o.toast.message,type:o.toast.type,onClose:t[4]||(t[4]=e=>o.toast.show=!1),duration:o.toast.duration},null,8,["show","message","type","duration"])])}var A=a(9335);const S={class:"toast-content"};function M(e,t,a,o,s,i){return a.show?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["toast",`toast-${a.type}`])},[(0,n.createElementVNode)("div",S,(0,n.toDisplayString)(a.message),1),(0,n.createElementVNode)("button",{class:"toast-close",onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))},"×")],2)):(0,n.createCommentVNode)("",!0)}var F={name:"AppToast",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:e=>["success","error","warning","info"].includes(e)},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],watch:{show(e){e&&this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration))}},methods:{close(){this.timer&&clearTimeout(this.timer),this.$emit("close")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},data(){return{timer:null}}},x=a(1241);const L=(0,x.A)(F,[["render",M],["__scopeId","data-v-9f6ec8d0"]]);var P=L,D=a(3719),U=a.n(D),_=a(4348),R={name:"TwitterLinkSection",components:{AppToast:P},setup(){const e=(0,A.useStore)(),t=(0,n.ref)(""),a=(0,n.ref)(!1),o=(0,n.ref)(!0),s=(0,n.ref)(!1),i=(0,n.computed)((()=>e.state.session.isAuthenticated)),c=(0,n.computed)((()=>e.getters.isTwitterLinked)),l=(0,n.computed)((()=>e.getters.twitterUsername)),r=(0,n.ref)({show:!1,message:"",type:"info",duration:7e3}),d=(e,t="info")=>{r.value.message=e,r.value.type=t,r.value.show=!0},u=async()=>{if(o.value=!0,i.value)try{await e.dispatch("checkTwitterLinked")}catch(t){_.error("Error checking linked account:",t)}finally{o.value=!1}else o.value=!1},m=async()=>{if(!t.value.trim())return d("Please enter a Twitter username","error");a.value=!0;try{const a=await e.dispatch("linkTwitterAccount",t.value.trim());a.success?(d("Twitter account successfully linked!","success"),t.value=""):d(a.message||"Failed to link Twitter account","error")}catch(n){_.error("Error linking account:",n),d("Error linking Twitter account","error")}finally{a.value=!1}},p=async()=>{if(c.value){a.value=!0;try{const t=await e.dispatch("unlinkTwitterAccount");t.success?d("Twitter account successfully unlinked!","success"):d(t.message||"Failed to unlink Twitter account","error")}catch(t){_.error("Error unlinking account:",t),d("Error unlinking Twitter account","error")}finally{a.value=!1}}};return(0,n.onMounted)((()=>{i.value?u():o.value=!1})),{twitterUsername:t,hasLinkedAccount:c,linkedUsername:l,isAuthenticated:i,isSubmitting:a,isLoading:o,isLinking:s,linkAccount:m,unlinkAccount:p,toast:r}}};const $=(0,x.A)(R,[["render",I],["__scopeId","data-v-7dc9569b"]]);var K=$;const W={class:"twitter-posts-section"},z={class:"section-header"},H={class:"next-check-info"},q={class:"time"},Y={key:0,class:"loading"},j={key:1,class:"no-posts"},G={key:2,class:"posts-grid"},O={class:"post-image"},X=["src","alt"],Z={key:0,class:"active-badge"},J={class:"post-content"},Q={key:0,class:"post-description"},ee=["href"],te={class:"post-meta"},ae={class:"meta-item"},ne={class:"time-value"},oe={class:"meta-stats"},se={class:"stat-item"},ie={class:"stat-item"},ce={class:"post-actions"},le=["onClick","disabled","title"],re={key:0},de={key:1},ue={key:2},me={key:0,disabled:"",class:"already-minted-btn"},pe=["onClick","disabled"];function fe(e,t,a,o,s,i){const c=(0,n.resolveComponent)("AppToast"),l=(0,n.resolveComponent)("MintPopup");return(0,n.openBlock)(),(0,n.createElementBlock)("div",W,[(0,n.createElementVNode)("div",z,[t[2]||(t[2]=(0,n.createElementVNode)("h2",null,"NFTs for Minting",-1)),(0,n.createElementVNode)("div",H,[t[1]||(t[1]=(0,n.createElementVNode)("span",null,"Next retweets check: ",-1)),(0,n.createElementVNode)("span",q,(0,n.toDisplayString)(o.formatNextCheckTime),1)])]),o.isLoading?((0,n.openBlock)(),(0,n.createElementBlock)("div",Y,t[3]||(t[3]=[(0,n.createElementVNode)("p",null,"Loading posts...",-1)]))):0===o.posts.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",j,t[4]||(t[4]=[(0,n.createElementVNode)("p",null,"No posts available for minting at the moment.",-1)]))):((0,n.openBlock)(),(0,n.createElementBlock)("div",G,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.posts,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.postId,class:"post-card"},[(0,n.createElementVNode)("div",O,[(0,n.createElementVNode)("img",{src:e.imageUrl,alt:e.title},null,8,X),e.isActive?((0,n.openBlock)(),(0,n.createElementBlock)("div",Z,"Active for Retweets")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",J,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(e.title),1),e.description?((0,n.openBlock)(),(0,n.createElementBlock)("p",Q,(0,n.toDisplayString)(e.description),1)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("a",{href:e.twitterUrl,target:"_blank",rel:"noopener noreferrer",class:"twitter-link"},t[5]||(t[5]=[(0,n.createElementVNode)("i",{class:"fab fa-twitter"},null,-1),(0,n.createTextVNode)(" View on Twitter ")]),8,ee),(0,n.createElementVNode)("div",te,[(0,n.createElementVNode)("div",ae,[t[6]||(t[6]=(0,n.createElementVNode)("span",{class:"label"},"Retweets are accepted until:",-1)),(0,n.createElementVNode)("div",ne,(0,n.toDisplayString)(o.formatDate(e.endMintingTime)),1)]),(0,n.createElementVNode)("div",oe,[(0,n.createElementVNode)("div",se,[t[7]||(t[7]=(0,n.createElementVNode)("span",{class:"label"},"Retweets:",-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.totalRetweets),1)]),(0,n.createElementVNode)("div",ie,[t[8]||(t[8]=(0,n.createElementVNode)("span",{class:"label"},"Minted:",-1)),(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.mintedCount||0),1)])])]),(0,n.createElementVNode)("div",ce,[(0,n.createElementVNode)("button",{onClick:t=>o.checkRetweet(e.postId),disabled:o.isCheckingRetweet===e.postId||o.hasMinted[e.postId]||e.alreadyMinted,class:"check-btn",title:`Debug: canMint=${o.canMint[e.postId]}, hasRetweeted=${e.hasRetweeted}`},[o.isCheckingRetweet===e.postId?((0,n.openBlock)(),(0,n.createElementBlock)("span",re,"Checking...")):!0===o.canMint[e.postId]?((0,n.openBlock)(),(0,n.createElementBlock)("span",de,"Retweet Verified ✓")):((0,n.openBlock)(),(0,n.createElementBlock)("span",ue,"Check My Retweet"))],8,le),e.alreadyMinted?((0,n.openBlock)(),(0,n.createElementBlock)("button",me," Already minted ")):void 0!==o.canMint[e.postId]&&o.canMint[e.postId]?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:1,onClick:t=>o.mintNft(e.postId),disabled:o.isMinting===e.postId,class:"mint-btn"},(0,n.toDisplayString)(o.isMinting===e.postId?"Minting...":"Mint NFT (50K BITCAT)"),9,pe)):(0,n.createCommentVNode)("",!0)])])])))),128))])),(0,n.createVNode)(c,{show:o.toast.show,message:o.toast.message,type:o.toast.type,onClose:t[0]||(t[0]=e=>o.toast.show=!1),duration:o.toast.duration},null,8,["show","message","type","duration"]),(0,n.createVNode)(l,{show:o.mintPopup.show,"tx-signature":o.mintPopup.txSignature,"is-complete":o.mintPopup.isComplete,"nft-info":o.mintPopup.nftInfo,onClose:o.closeMintPopup},null,8,["show","tx-signature","is-complete","nft-info","onClose"])])}a(8992),a(2577),a(3949),a(8872);var ve=a(6659);const ge={key:0,class:"mint-popup-overlay"},ke={class:"mint-popup-content"},he={class:"mint-popup-header"},ye={class:"mint-popup-body"},we={key:0,class:"minting-progress"},Ne={class:"transaction-info"},be={class:"tx-id"},Ee={key:1,class:"minting-complete"},Te={key:0,class:"nft-image-container"},Ve=["src"],Be={class:"nft-details"},Ce={class:"tx-id"},Ie={class:"asset-id"},Ae={class:"view-links"},Se=["href"];function Me(e,t,a,o,s,i){const c=(0,n.resolveComponent)("router-link");return a.show?((0,n.openBlock)(),(0,n.createElementBlock)("div",ge,[(0,n.createElementVNode)("div",ke,[(0,n.createElementVNode)("div",he,[(0,n.createElementVNode)("h2",null,(0,n.toDisplayString)(a.isComplete?"NFT Successfully Minted!":"NFT Minting in Progress"),1),a.isComplete?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"close-button",onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))},"×")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",ye,[a.isComplete?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ee,[t[10]||(t[10]=(0,n.createElementVNode)("div",{class:"success-icon"},"✓",-1)),(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(a.nftInfo.name),1),a.nftInfo.imageUri?((0,n.openBlock)(),(0,n.createElementBlock)("div",Te,[(0,n.createElementVNode)("img",{src:a.nftInfo.imageUri,alt:"NFT Image",class:"nft-image"},null,8,Ve)])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",Be,[(0,n.createElementVNode)("p",null,[t[4]||(t[4]=(0,n.createElementVNode)("strong",null,"Transaction ID:",-1)),t[5]||(t[5]=(0,n.createTextVNode)()),(0,n.createElementVNode)("span",Ce,(0,n.toDisplayString)(a.txSignature),1)]),(0,n.createElementVNode)("p",null,[t[6]||(t[6]=(0,n.createElementVNode)("strong",null,"Asset ID:",-1)),t[7]||(t[7]=(0,n.createTextVNode)()),(0,n.createElementVNode)("span",Ie,(0,n.toDisplayString)(a.nftInfo.assetPublicKey),1)])]),(0,n.createElementVNode)("div",Ae,[(0,n.createVNode)(c,{to:`/nft/${a.nftInfo.assetPublicKey}`,class:"view-link"},{default:(0,n.withCtx)((()=>t[8]||(t[8]=[(0,n.createElementVNode)("i",{class:"fas fa-eye"},null,-1),(0,n.createTextVNode)(" View NFT Details ")]))),_:1},8,["to"]),(0,n.createElementVNode)("a",{href:`https://core.metaplex.com/explorer/${a.nftInfo.assetPublicKey}`,target:"_blank",class:"view-link"},t[9]||(t[9]=[(0,n.createElementVNode)("i",{class:"fas fa-external-link-alt"},null,-1),(0,n.createTextVNode)(" View on Metaplex ")]),8,Se)])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",we,[t[2]||(t[2]=(0,n.createElementVNode)("div",{class:"spinner"},null,-1)),t[3]||(t[3]=(0,n.createElementVNode)("p",{class:"warning-text"},"Please do not close this window. Minting process may take several minutes.",-1)),(0,n.createElementVNode)("p",Ne,[t[1]||(t[1]=(0,n.createTextVNode)("Transaction ID: ")),(0,n.createElementVNode)("span",be,(0,n.toDisplayString)(a.txSignature),1)])]))])])])):(0,n.createCommentVNode)("",!0)}var Fe={name:"MintPopup",props:{show:{type:Boolean,default:!1},txSignature:{type:String,default:""},isComplete:{type:Boolean,default:!1},nftInfo:{type:Object,default:()=>({name:"",assetPublicKey:"",imageUri:"",metadataUri:""})}},methods:{close(){this.$emit("close")}}};const xe=(0,x.A)(Fe,[["render",Me],["__scopeId","data-v-72ade709"]]);var Le=xe,Pe=a(5290),De=a(4348),Ue=a(712)["Buffer"],_e={name:"TwitterPostsList",components:{AppToast:P,MintPopup:Le},setup(){(0,ve.vT)();const e=(0,A.useStore)(),t=(0,n.ref)([]),a=(0,n.ref)(!0),o=(0,n.ref)(null),s=(0,n.ref)(null),i=(0,n.ref)({}),c=(0,n.ref)(null),l=(0,n.ref)({}),r=(0,n.ref)({show:!1,txSignature:"",isComplete:!1,nftInfo:{}}),d=(0,n.ref)({show:!1,message:"",type:"info",duration:1e4}),u=(0,n.computed)((()=>e.state.session.isAuthenticated)),m=(0,n.computed)((()=>e.getters.isTwitterLinked)),p=(e,t="info")=>{d.value.message=e,d.value.type=t,d.value.show=!0},f=(0,n.computed)((()=>{if(!o.value)return"Unknown";const e=new Date(o.value),t=new Date(e.getTime()+12e5);return v(t)})),v=e=>{const t=new Date(e);return t.toLocaleString()},g=async()=>{a.value=!0;try{const e=localStorage.getItem("userTag");De.log("User tag from localStorage:",e);let a="/nft-bitcat/twitter-posts";e&&(a+=`?userTag=${encodeURIComponent(e)}`),De.log("Fetching posts with URL:",a);const n=await U().get(a),s=n.data;if(s.success){t.value=s.posts;const e=t.value.reduce(((e,t)=>{if(!t.lastCheckTime)return e;const a=new Date(t.lastCheckTime);return!e||a>e?a:e}),null);o.value=e,t.value.forEach((e=>{De.log(`Post ${e.postId} has retweeted:`,e.hasRetweeted),De.log(`Post ${e.postId} can mint:`,e.canMint),De.log(`Post ${e.postId} already minted:`,e.alreadyMinted),e.alreadyMinted&&(l.value[e.postId]=!0),!0!==e.hasRetweeted||e.alreadyMinted?void 0===i.value[e.postId]&&(i.value[e.postId]=!1):(i.value[e.postId]=!0,De.log(`Setting canMint for post ${e.postId} to true`))}))}}catch(e){De.error("Error fetching posts:",e),p("Failed to load Twitter posts","error")}finally{a.value=!1}},k=async a=>{if(!w())return p("Please log in to check your retweet status","warning");if(!m.value)return p("Please link your Twitter account first","warning");if(!e.getters.hasWallet)return p("Please connect your wallet to mint NFTs","warning");const n=t.value.find((e=>e.postId===a));if(n&&n.alreadyMinted)return p("You have already minted an NFT for this post","info");s.value=a;try{const e=await U().get(`/twitter/check-retwit/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),t=e.data;t.success?(i.value[a]=t.canMint,t.canMint?p("You can mint an NFT for this post!","success"):p("You need to retweet this post to mint an NFT","warning")):p(t.message||"Failed to check retweet","error")}catch(o){De.error("Error checking retweet:",o),p("Error checking retweet status","error")}finally{s.value=null}},h=async n=>{if(!w())return p("Please log in to mint an NFT","warning");if(!m.value)return p("Please link your Twitter account first","warning");if(!e.getters.hasWallet)return p("Please connect your wallet first","warning");const o=t.value.find((e=>e.postId===n));if(o&&o.alreadyMinted)return p("You have already minted an NFT for this post","info");c.value=n;try{if(!window.solana)return void p("Please install Phantom Wallet extension","error");if(!window.solana.isConnected)try{await window.solana.connect()}catch(s){return p(`Error connecting to Phantom Wallet: ${s.message}`,"error"),void(a.value=!1)}const e=window.solana.publicKey.toString(),t=new Pe.Ng("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c","confirmed"),i=await U().post("/nft-bitcat/mint",{tweetId:n,walletPublicKey:e},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),c=i.data;if(De.log(i),c.success){const e=window.solana,a=Pe.ZX.from(Ue.from(c.transaction,"base64")),{blockhash:s}=await t.getLatestBlockhash("confirmed");a.recentBlockhash=s,a.feePayer=e.publicKey,De.log(`Mint will use ${c.bitcatAmount} BITCAT tokens`);const i={skipPreflight:!1,preflightCommitment:"confirmed"},d=await e.signTransaction(a),u=await t.sendRawTransaction(d.serialize(),i);r.value={show:!0,txSignature:u,isComplete:!1,nftInfo:{name:o?.title||"Bitcat NFT",assetPublicKey:c.expectedNftAddress||"",imageUri:o?.imageUrl||""}},await t.confirmTransaction(u,"confirmed");const m=await U().post("/nft-bitcat/update-tx",{txSignature:u,assetPublicKey:e.publicKey.toString(),postId:n,metadataUri:c.metadataUri},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});m.data.success?(m.data.nftInfo&&(r.value.nftInfo=m.data.nftInfo),r.value.isComplete=!0,o.alreadyMinted=!0,l.value[n]=!0,p("NFT successfully minted!","success")):p("Error updating NFT status","error")}else p(c.message||"Error preparing data for minting","error")}catch(i){De.error("Error minting NFT:",i),p(`Error minting NFT: ${i.message}`,"error"),r.value.show&&(r.value.show=!1)}finally{c.value=null}},y=()=>{r.value.show=!1},w=(new Pe.Ng("https://sleek-icy-frog.solana-mainnet.quiknode.pro/9d4845e2d4c60caf45dc4f10d0bdcfdbcd6a321c"),()=>u.value);return(0,n.onMounted)((async()=>{u.value&&await e.dispatch("checkTwitterLinked"),g()})),(0,n.watch)((()=>e.state.session.isAuthenticated),(t=>{t&&e.dispatch("checkTwitterLinked")})),(0,n.watch)((()=>e.getters.isTwitterLinked),(e=>{De.log("Twitter link status changed:",e),e&&g()})),{posts:t,isLoading:a,isCheckingRetweet:s,isMinting:c,canMint:i,hasMinted:l,mintPopup:r,closeMintPopup:y,checkRetweet:k,mintNft:h,formatNextCheckTime:f,formatDate:v,toast:d,isAuthenticated:u,hasLinkedTwitter:m}}};const Re=(0,x.A)(_e,[["render",fe],["__scopeId","data-v-d3a2c146"]]);var $e=Re;const Ke={class:"user-nfts-section"},We={key:0,class:"info-message"},ze={key:1,class:"info-message"},He={key:2,class:"info-message"},qe={key:3,class:"info-message"},Ye={key:4,class:"nfts-grid"},je={class:"nft-image-container"},Ge=["src","alt"],Oe={class:"nft-info"},Xe={class:"nft-actions"};function Ze(e,t,a,o,s,i){const c=(0,n.resolveComponent)("router-link"),l=(0,n.resolveComponent)("AppToast");return(0,n.openBlock)(),(0,n.createElementBlock)("div",Ke,[t[1]||(t[1]=(0,n.createElementVNode)("div",{class:"section-header"},[(0,n.createElementVNode)("h2",null,"Your Minted NFTs")],-1)),o.isAuthenticated?o.loading?((0,n.openBlock)(),(0,n.createElementBlock)("p",ze,"Loading your NFTs...")):o.error?((0,n.openBlock)(),(0,n.createElementBlock)("p",He,(0,n.toDisplayString)(o.error),1)):0===o.nfts.length?((0,n.openBlock)(),(0,n.createElementBlock)("p",qe,"You haven't minted any NFTs yet.")):(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("p",We,"You need to login first")),o.isAuthenticated&&!o.loading&&!o.error&&o.nfts.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",Ye,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.nfts,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.assetPublicKey,class:"nft-card"},[(0,n.createElementVNode)("div",je,[(0,n.createElementVNode)("img",{src:e.imageUri,alt:e.name,class:"nft-image"},null,8,Ge)]),(0,n.createElementVNode)("div",Oe,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)("p",{class:(0,n.normalizeClass)(["nft-status",o.getStatusClass(e.status)])},(0,n.toDisplayString)(e.status.charAt(0).toUpperCase()+e.status.slice(1)),3),(0,n.createElementVNode)("div",Xe,[(0,n.createVNode)(c,{to:`/nft/${e.assetPublicKey}`,class:"view-button"},{default:(0,n.withCtx)((()=>t[0]||(t[0]=[(0,n.createTextVNode)(" View Details ")]))),_:2},1032,["to"])])])])))),128))])):(0,n.createCommentVNode)("",!0),o.toast.show?((0,n.openBlock)(),(0,n.createBlock)(l,{key:5,message:o.toast.message,type:o.toast.type,duration:o.toast.duration},null,8,["message","type","duration"])):(0,n.createCommentVNode)("",!0)])}var Je=a(4348),Qe={name:"UserNftsList",components:{AppToast:P},setup(){const e=(0,A.useStore)(),t=(0,n.ref)([]),a=(0,n.ref)(!0),o=(0,n.ref)(null),s=(0,n.computed)((()=>e.state.session.isAuthenticated)),i=(e,t="info")=>{c.value.message=e,c.value.type=t,c.value.show=!0},c=(0,n.ref)({show:!1,message:"",type:"info",duration:7e3}),l=async()=>{if(s.value){a.value=!0,o.value=null;try{const e=await U().get("/nft-bitcat/user-nfts",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});e.data.success?t.value=e.data.nfts||[]:(o.value=e.data.message||"Failed to load your NFTs",i(o.value,"error"))}catch(e){Je.error("Error fetching user NFTs:",e),o.value=e.response?.data?.message||"An error occurred while fetching your NFTs",i(o.value,"error")}finally{a.value=!1}}else a.value=!1},r=e=>{switch(e){case"completed":return"status-completed";case"pending":return"status-pending";case"failed":return"status-failed";default:return""}};return(0,n.onMounted)((()=>{s.value?l():a.value=!1})),{nfts:t,loading:a,error:o,isAuthenticated:s,getStatusClass:r,toast:c,showToast:i}}};const et=(0,x.A)(Qe,[["render",Ze],["__scopeId","data-v-4c8609c2"]]);var tt=et;const at={class:"recent-mints-section"},nt={key:0,class:"info-message"},ot={key:1,class:"info-message"},st={key:2,class:"info-message"},it={key:3,class:"nfts-list"},ct={class:"nft-image-container"},lt=["src","alt"],rt={class:"nft-info"},dt={key:0,class:"nft-minted-by"},ut={class:"nft-date"},mt={class:"nft-actions"};function pt(e,t,a,o,s,i){const c=(0,n.resolveComponent)("router-link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",at,[t[2]||(t[2]=(0,n.createElementVNode)("div",{class:"section-header"},[(0,n.createElementVNode)("h2",null,"Recent 20 Mints")],-1)),o.loading?((0,n.openBlock)(),(0,n.createElementBlock)("p",nt,"Loading recent mints...")):o.error?((0,n.openBlock)(),(0,n.createElementBlock)("p",ot,(0,n.toDisplayString)(o.error),1)):0===o.nfts.length?((0,n.openBlock)(),(0,n.createElementBlock)("p",st,"No recent mints found.")):(0,n.createCommentVNode)("",!0),!o.loading&&!o.error&&o.nfts.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",it,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.nfts,(e=>((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.assetPublicKey,class:"nft-item"},[(0,n.createElementVNode)("div",ct,[(0,n.createElementVNode)("img",{src:e.imageUri,alt:e.name,class:"nft-image"},null,8,lt)]),(0,n.createElementVNode)("div",rt,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(e.name),1),e.userTag?((0,n.openBlock)(),(0,n.createElementBlock)("p",dt,[t[0]||(t[0]=(0,n.createTextVNode)(" Minted by: ")),(0,n.createVNode)(c,{to:`/player-nfts/${e.userTag}`},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.userTag),1)])),_:2},1032,["to"])])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("p",ut,(0,n.toDisplayString)(o.formatDate(e.createdAt)),1),(0,n.createElementVNode)("div",mt,[(0,n.createVNode)(c,{to:`/nft/${e.assetPublicKey}`,class:"view-button"},{default:(0,n.withCtx)((()=>t[1]||(t[1]=[(0,n.createTextVNode)(" View Details ")]))),_:2},1032,["to"])])])])))),128))])):(0,n.createCommentVNode)("",!0)])}var ft=a(4348),vt={name:"RecentMintsList",setup(){const e=(0,n.ref)([]),t=(0,n.ref)(!0),a=(0,n.ref)(null),o=async()=>{t.value=!0,a.value=null;try{const t=await U().get("/nft-bitcat/recent-mints");t.data.success?e.value=t.data.nfts||[]:a.value=t.data.message||"Failed to load recent mints"}catch(n){ft.error("Error fetching recent mints:",n),a.value=n.response?.data?.message||"An error occurred while fetching recent mints"}finally{t.value=!1}},s=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,n.onMounted)((()=>{o()})),{nfts:e,loading:t,error:a,formatDate:s}}};const gt=(0,x.A)(vt,[["render",pt],["__scopeId","data-v-0ade051a"]]);var kt=gt;const ht={key:0,class:"how-it-works-popup"},yt={class:"popup-content"},wt={class:"popup-header"},Nt={class:"popup-footer"};function bt(e,t,a,o,s,i){return a.show?((0,n.openBlock)(),(0,n.createElementBlock)("div",ht,[(0,n.createElementVNode)("div",{class:"popup-overlay",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),(0,n.createElementVNode)("div",yt,[(0,n.createElementVNode)("div",wt,[t[3]||(t[3]=(0,n.createElementVNode)("h2",null,[(0,n.createElementVNode)("i",{class:"fas fa-info-circle"}),(0,n.createTextVNode)(" How BITCAT NFT Minting Works")],-1)),(0,n.createElementVNode)("button",{class:"close-button",onClick:t[1]||(t[1]=t=>e.$emit("close"))},"×")]),t[5]||(t[5]=(0,n.createStaticVNode)('<div class="popup-body" data-v-cd777fb4><div class="info-block" data-v-cd777fb4><div class="block-header" data-v-cd777fb4><i class="fas fa-rocket" data-v-cd777fb4></i><h3 data-v-cd777fb4>Getting Started with BITCAT NFTs</h3></div><div class="block-content" data-v-cd777fb4><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Twitter Required:</strong> To mint NFTs, you need to enter your Twitter username. This allows us to verify that you&#39;ve retweeted the post, which unlocks the ability to mint specific NFTs.</p></div><div class="info-item highlight-box" data-v-cd777fb4><div class="highlight-header" data-v-cd777fb4><i class="fas fa-question-circle" data-v-cd777fb4></i><h4 data-v-cd777fb4>Why Retweet?</h4></div><p data-v-cd777fb4>Retweeting helps attract more crypto enthusiasts to the BITCAT project, growing our community and increasing the value of your NFTs. It&#39;s a win-win for everyone!</p></div></div></div><div class="info-block" data-v-cd777fb4><div class="block-header" data-v-cd777fb4><i class="fas fa-cogs" data-v-cd777fb4></i><h3 data-v-cd777fb4>Technical Details &amp; Security</h3></div><div class="block-content" data-v-cd777fb4><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Decentralized Storage:</strong> All NFTs are stored on <strong data-v-cd777fb4>Irys</strong> (formerly Arweave), a decentralized storage network that ensures your data remains accessible forever.</p></div><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Immutable Metadata:</strong> After minting, you receive full ownership rights to your NFT. The metadata is <span class="highlight-text" data-v-cd777fb4>immutable</span>, guaranteeing that the unique attributes of each NFT cannot be changed.</p></div><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4><strong data-v-cd777fb4>Payment Method:</strong> To mint an NFT, you need to pay with BITCAT tokens. All funds collected will be used exclusively for project promotion and development.</p></div></div></div><div class="info-block" data-v-cd777fb4><div class="block-header" data-v-cd777fb4><i class="fas fa-gem" data-v-cd777fb4></i><h3 data-v-cd777fb4>NFT Attributes &amp; Ecosystem Value</h3></div><div class="block-content" data-v-cd777fb4><div class="info-item" data-v-cd777fb4><p data-v-cd777fb4>Each NFT is minted with unique attributes that affect its value within our developing ecosystem:</p><ul class="features-list" data-v-cd777fb4><li data-v-cd777fb4><i class="fas fa-trophy" data-v-cd777fb4></i> <strong data-v-cd777fb4>Lottery Participation</strong> - Use your NFTs in our upcoming lottery system</li><li data-v-cd777fb4><i class="fas fa-gamepad" data-v-cd777fb4></i> <strong data-v-cd777fb4>Crypto Duel</strong> - Battle your NFTs against others in our game</li><li data-v-cd777fb4><i class="fas fa-chart-line" data-v-cd777fb4></i> <strong data-v-cd777fb4>Ecosystem Value</strong> - Unique attributes determine rarity and utility</li><li data-v-cd777fb4><i class="fas fa-random" data-v-cd777fb4></i> <strong data-v-cd777fb4>Random Assignment</strong> - All attributes are assigned randomly at minting</li></ul></div><div class="info-item highlight-box important" data-v-cd777fb4><div class="highlight-header" data-v-cd777fb4><i class="fas fa-exclamation-circle" data-v-cd777fb4></i><h4 data-v-cd777fb4>Important to Remember</h4></div><p data-v-cd777fb4>The rarity and unique combination of attributes in your NFT directly impacts its utility and value in the BITCAT ecosystem. Each NFT is truly one-of-a-kind!</p></div></div></div></div>',1)),(0,n.createElementVNode)("div",Nt,[(0,n.createElementVNode)("button",{class:"close-btn",onClick:t[2]||(t[2]=t=>e.$emit("close"))},t[4]||(t[4]=[(0,n.createElementVNode)("i",{class:"fas fa-check"},null,-1),(0,n.createTextVNode)(" Got it! ")]))])])])):(0,n.createCommentVNode)("",!0)}var Et={name:"HowItWorksPopup",props:{show:{type:Boolean,default:!1}},emits:["close"]};const Tt=(0,x.A)(Et,[["render",bt],["__scopeId","data-v-cd777fb4"]]);var Vt=Tt,Bt={name:"NftBitcatPage",components:{TwitterLinkSection:K,TwitterPostsList:$e,UserNftsList:tt,RecentMintsList:kt,HowItWorksPopup:Vt},setup(){const e=(0,n.ref)(0),t=(0,n.ref)(!1),a=[{name:"Available",component:"TwitterPostsList"},{name:"My NFTs",component:"UserNftsList"},{name:"Mint History",component:"RecentMintsList"}];return(0,n.onMounted)((()=>{const t=localStorage.getItem("nft-bitcat-page-tab");null!==t&&(e.value=parseInt(t))})),(0,n.watch)(e,(e=>{localStorage.setItem("nft-bitcat-page-tab",e.toString())})),{activeTab:e,tabs:a,showHowItWorks:t}}};const Ct=(0,x.A)(Bt,[["render",k],["__scopeId","data-v-e8192248"]]);var It=Ct}}]);
//# sourceMappingURL=415.ee3c2ea1.js.map