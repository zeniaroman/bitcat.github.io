"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[802],{9802:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var l=a(4061);const n={class:"arena-game-field"},o={class:"game-status"},r={class:"player-info"},s={class:"hp-bar"},u={class:"timer"},c={class:"player-info opponent"},v={class:"hp-bar"},i=.8,d=15,m=50,y=10;var p={__name:"ArenaGameField",setup(e,{expose:t}){const a=(0,l.ref)({x:50,y:0}),p=(0,l.ref)({x:300,y:0}),f=(0,l.ref)(100),x=(0,l.ref)(100),h=(0,l.ref)(120),k=(0,l.ref)([{id:1,x:0,y:0,width:600},{id:2,x:100,y:100,width:200},{id:3,x:400,y:150,width:150}]),E=(0,l.ref)({x:0,y:0}),M=(0,l.ref)(!1),N=(0,l.ref)(null),V=e=>{const t=Math.floor(e/60),a=e%60;return`${t}:${a.toString().padStart(2,"0")}`},w=()=>{E.value.y-=i,a.value.y+=E.value.y;for(const e of k.value)if(a.value.y<=e.y&&a.value.y+E.value.y>e.y&&a.value.x>=e.x&&a.value.x<=e.x+e.width){a.value.y=e.y,E.value.y=0,M.value=!1;break}a.value.y<0&&(a.value.y=0,E.value.y=0,M.value=!1)};let b;const _=()=>{h.value>0&&(w(),P()),b=requestAnimationFrame(_)};let g;(0,l.onMounted)((()=>{_(),g=setInterval((()=>{h.value>0&&h.value--}),1e3)})),(0,l.onUnmounted)((()=>{b&&cancelAnimationFrame(b),g&&clearInterval(g)}));const A=()=>{M.value||(E.value.y=d,M.value=!0)},B=()=>{const e=Math.abs(a.value.x-p.value.x);e<=m&&(x.value=Math.max(0,x.value-y))},P=()=>{const e=p.value.x<a.value.x?2:-2;p.value.x+=e;const t=Math.abs(p.value.x-a.value.x);t<=m&&(f.value=Math.max(0,f.value-1))};return t({playerPosition:(0,l.readonly)(a),updatePlayerPosition:e=>{a.value.x=Math.max(20,Math.min(e,580))},jumpPlayer:A,attackPlayer:B}),(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createElementVNode)("div",o,[(0,l.createElementVNode)("div",r,[(0,l.createElementVNode)("div",s,[(0,l.createElementVNode)("div",{style:(0,l.normalizeStyle)({width:f.value+"%"}),class:"hp-fill"},null,4)]),t[0]||(t[0]=(0,l.createElementVNode)("span",null,"You",-1))]),(0,l.createElementVNode)("div",u,(0,l.toDisplayString)(V(h.value)),1),(0,l.createElementVNode)("div",c,[(0,l.createElementVNode)("div",v,[(0,l.createElementVNode)("div",{style:(0,l.normalizeStyle)({width:x.value+"%"}),class:"hp-fill"},null,4)]),t[1]||(t[1]=(0,l.createElementVNode)("span",null,"Bot",-1))])]),(0,l.createElementVNode)("div",{class:"game-field",ref_key:"gameField",ref:N},[(0,l.createElementVNode)("div",{class:"player",style:(0,l.normalizeStyle)({left:a.value.x+"px",bottom:a.value.y+"px"})}," ðŸ˜º ",4),(0,l.createElementVNode)("div",{class:"player bot",style:(0,l.normalizeStyle)({left:p.value.x+"px",bottom:p.value.y+"px"})}," ðŸ¤– ",4),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(k.value,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:e.id,class:"platform",style:(0,l.normalizeStyle)({left:e.x+"px",bottom:e.y+"px",width:e.width+"px"})},null,4)))),128))],512)]))}},f=a(1241);const x=(0,f.A)(p,[["__scopeId","data-v-12591c45"]]);var h=x;const k={class:"arena-controls"},E={class:"movement-controls"},M={class:"action-controls"},N=50;var V={__name:"ArenaControls",emits:["move","jump","attack"],setup(e,{emit:t}){const a=(0,l.ref)(null),n=(0,l.ref)(null),o=(0,l.ref)({x:0,y:0}),r=(0,l.ref)(!1),s=(0,l.computed)((()=>({transform:`translate(${o.value.x}px, ${o.value.y}px)`}))),u=e=>{const t=e.touches?e.touches[0]:e,l=a.value.getBoundingClientRect();return{x:t.clientX-l.left,y:t.clientY-l.top}},c=e=>{e.preventDefault(),r.value=!0,d(e)},v=e=>{r.value&&(e.preventDefault(),d(e))},i=e=>{e.preventDefault(),r.value=!1,o.value={x:0,y:0},p("move",{x:0,y:0})},d=e=>{const t=u(e),l=a.value,n=l.offsetWidth/2,r=l.offsetHeight/2;let s=t.x-n,c=t.y-r;const v=Math.sqrt(s*s+c*c);if(v>N){const e=Math.atan2(c,s);s=Math.cos(e)*N,c=Math.sin(e)*N}o.value={x:s,y:c},p("move",{x:s/N,y:-c/N})},m=e=>{e.preventDefault(),p("jump")},y=e=>{e.preventDefault(),p("attack")},p=t;return(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",k,[(0,l.createElementVNode)("div",E,[(0,l.createElementVNode)("div",{ref_key:"joystickContainer",ref:a,class:"joystick-container",onTouchstart:c,onTouchmove:v,onTouchend:i,onMousedown:c,onMousemove:v,onMouseup:i,onMouseleave:i},[(0,l.createElementVNode)("div",{ref_key:"joystick",ref:n,class:"joystick",style:(0,l.normalizeStyle)(s.value)},null,4)],544)]),(0,l.createElementVNode)("div",M,[(0,l.createElementVNode)("button",{class:"action-button jump",onTouchstart:(0,l.withModifiers)(m,["prevent"]),onMousedown:(0,l.withModifiers)(m,["prevent"])}," JUMP ",32),(0,l.createElementVNode)("button",{class:"action-button attack",onTouchstart:(0,l.withModifiers)(y,["prevent"]),onMousedown:(0,l.withModifiers)(y,["prevent"])}," ATTACK ",32)])]))}};const w=(0,f.A)(V,[["__scopeId","data-v-30be4129"]]);var b=w;const _={class:"arena-page"},g={class:"game-container"},A=5;var B={__name:"ArenaPage",setup(e){const t=(0,l.ref)(null),a=({x:e,y:a})=>{if(!t.value)return;const l=t.value.playerPosition,n=l.x+e*A,o=Math.max(20,Math.min(n,580));t.value.updatePlayerPosition(o,l.y)},n=()=>{t.value&&t.value.jumpPlayer()},o=()=>{t.value&&t.value.attackPlayer()};return(e,r)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",_,[r[0]||(r[0]=(0,l.createElementVNode)("h1",null,"BITCAT Arena",-1)),(0,l.createElementVNode)("div",g,[(0,l.createVNode)(h,{ref_key:"gameField",ref:t},null,512)]),(0,l.createVNode)(b,{onMove:a,onJump:n,onAttack:o})]))}};const P=(0,f.A)(B,[["__scopeId","data-v-135dd082"]]);var j=P}}]);
//# sourceMappingURL=802.859b237b.js.map