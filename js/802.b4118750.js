"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[802],{9802:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var l=t(6768),n=t(144),u=t(4232);const s={class:"arena-game-field"},o={class:"game-status"},v={class:"player-info"},r={class:"hp-bar"},c={class:"timer"},i={class:"player-info opponent"},y={class:"hp-bar"},p=.8,d=15,x=50,k=10;var m={__name:"ArenaGameField",setup(e,{expose:a}){const t=(0,n.KR)({x:50,y:0}),m=(0,n.KR)({x:300,y:0}),f=(0,n.KR)(100),h=(0,n.KR)(100),L=(0,n.KR)(120),M=(0,n.KR)([{id:1,x:0,y:0,width:600},{id:2,x:100,y:100,width:200},{id:3,x:400,y:150,width:150}]),b=(0,n.KR)({x:0,y:0}),_=(0,n.KR)(!1),K=(0,n.KR)(null),R=e=>{const a=Math.floor(e/60),t=e%60;return`${a}:${t.toString().padStart(2,"0")}`},T=()=>{b.value.y-=p,t.value.y+=b.value.y;for(const e of M.value)if(t.value.y<=e.y&&t.value.y+b.value.y>e.y&&t.value.x>=e.x&&t.value.x<=e.x+e.width){t.value.y=e.y,b.value.y=0,_.value=!1;break}t.value.y<0&&(t.value.y=0,b.value.y=0,_.value=!1)};let w;const A=()=>{L.value>0&&(T(),j()),w=requestAnimationFrame(A)};let g;(0,l.sV)((()=>{A(),g=setInterval((()=>{L.value>0&&L.value--}),1e3)})),(0,l.hi)((()=>{w&&cancelAnimationFrame(w),g&&clearInterval(g)}));const C=()=>{_.value||(b.value.y=d,_.value=!0)},P=()=>{const e=Math.abs(t.value.x-m.value.x);e<=x&&(h.value=Math.max(0,h.value-k))},j=()=>{const e=m.value.x<t.value.x?2:-2;m.value.x+=e;const a=Math.abs(m.value.x-t.value.x);a<=x&&(f.value=Math.max(0,f.value-1))};return a({playerPosition:(0,n.tB)(t),updatePlayerPosition:e=>{t.value.x=Math.max(20,Math.min(e,580))},jumpPlayer:C,attackPlayer:P}),(e,a)=>((0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("div",o,[(0,l.Lk)("div",v,[(0,l.Lk)("div",r,[(0,l.Lk)("div",{style:(0,u.Tr)({width:f.value+"%"}),class:"hp-fill"},null,4)]),a[0]||(a[0]=(0,l.Lk)("span",null,"You",-1))]),(0,l.Lk)("div",c,(0,u.v_)(R(L.value)),1),(0,l.Lk)("div",i,[(0,l.Lk)("div",y,[(0,l.Lk)("div",{style:(0,u.Tr)({width:h.value+"%"}),class:"hp-fill"},null,4)]),a[1]||(a[1]=(0,l.Lk)("span",null,"Bot",-1))])]),(0,l.Lk)("div",{class:"game-field",ref_key:"gameField",ref:K},[(0,l.Lk)("div",{class:"player",style:(0,u.Tr)({left:t.value.x+"px",bottom:t.value.y+"px"})}," ðŸ˜º ",4),(0,l.Lk)("div",{class:"player bot",style:(0,u.Tr)({left:m.value.x+"px",bottom:m.value.y+"px"})}," ðŸ¤– ",4),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(M.value,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"platform",style:(0,u.Tr)({left:e.x+"px",bottom:e.y+"px",width:e.width+"px"})},null,4)))),128))],512)]))}},f=t(1241);const h=(0,f.A)(m,[["__scopeId","data-v-12591c45"]]);var L=h,M=t(5130);const b={class:"arena-controls"},_={class:"movement-controls"},K={class:"action-controls"},R=50;var T={__name:"ArenaControls",emits:["move","jump","attack"],setup(e,{emit:a}){const t=(0,n.KR)(null),s=(0,n.KR)(null),o=(0,n.KR)({x:0,y:0}),v=(0,n.KR)(!1),r=(0,l.EW)((()=>({transform:`translate(${o.value.x}px, ${o.value.y}px)`}))),c=e=>{const a=e.touches?e.touches[0]:e,l=t.value.getBoundingClientRect();return{x:a.clientX-l.left,y:a.clientY-l.top}},i=e=>{e.preventDefault(),v.value=!0,d(e)},y=e=>{v.value&&(e.preventDefault(),d(e))},p=e=>{e.preventDefault(),v.value=!1,o.value={x:0,y:0},m("move",{x:0,y:0})},d=e=>{const a=c(e),l=t.value,n=l.offsetWidth/2,u=l.offsetHeight/2;let s=a.x-n,v=a.y-u;const r=Math.sqrt(s*s+v*v);if(r>R){const e=Math.atan2(v,s);s=Math.cos(e)*R,v=Math.sin(e)*R}o.value={x:s,y:v},m("move",{x:s/R,y:-v/R})},x=e=>{e.preventDefault(),m("jump")},k=e=>{e.preventDefault(),m("attack")},m=a;return(e,a)=>((0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("div",_,[(0,l.Lk)("div",{ref_key:"joystickContainer",ref:t,class:"joystick-container",onTouchstart:i,onTouchmove:y,onTouchend:p,onMousedown:i,onMousemove:y,onMouseup:p,onMouseleave:p},[(0,l.Lk)("div",{ref_key:"joystick",ref:s,class:"joystick",style:(0,u.Tr)(r.value)},null,4)],544)]),(0,l.Lk)("div",K,[(0,l.Lk)("button",{class:"action-button jump",onTouchstart:(0,M.D$)(x,["prevent"]),onMousedown:(0,M.D$)(x,["prevent"])}," JUMP ",32),(0,l.Lk)("button",{class:"action-button attack",onTouchstart:(0,M.D$)(k,["prevent"]),onMousedown:(0,M.D$)(k,["prevent"])}," ATTACK ",32)])]))}};const w=(0,f.A)(T,[["__scopeId","data-v-30be4129"]]);var A=w;const g={class:"arena-page"},C={class:"game-container"},P=5;var j={__name:"ArenaPage",setup(e){const a=(0,n.KR)(null),t=({x:e,y:t})=>{if(!a.value)return;const l=a.value.playerPosition,n=l.x+e*P,u=Math.max(20,Math.min(n,580));a.value.updatePlayerPosition(u,l.y)},u=()=>{a.value&&a.value.jumpPlayer()},s=()=>{a.value&&a.value.attackPlayer()};return(e,n)=>((0,l.uX)(),(0,l.CE)("div",g,[n[0]||(n[0]=(0,l.Lk)("h1",null,"BITCAT Arena",-1)),(0,l.Lk)("div",C,[(0,l.bF)(L,{ref_key:"gameField",ref:a},null,512)]),(0,l.bF)(A,{onMove:t,onJump:u,onAttack:s})]))}};const D=(0,f.A)(j,[["__scopeId","data-v-135dd082"]]);var F=D}}]);
//# sourceMappingURL=802.b4118750.js.map