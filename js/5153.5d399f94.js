"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[5153],{71241:function(e,a){a.A=(e,a)=>{const s=e.__vccOpts||e;for(const[t,l]of a)s[t]=l;return s}},10587:function(e,a,s){s.d(a,{A:function(){return o}});var t=s(56768),l=s(24232);const r={class:"toast-content"};function u(e,a,s,u,i,n){return s.show?((0,t.uX)(),(0,t.CE)("div",{key:0,class:(0,l.C4)(["toast",`toast-${s.type}`])},[(0,t.Lk)("div",r,(0,l.v_)(s.message),1),(0,t.Lk)("button",{class:"toast-close",onClick:a[0]||(a[0]=(...e)=>n.close&&n.close(...e))},"Ã—")],2)):(0,t.Q3)("",!0)}var i={name:"AppToast",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:e=>["success","error","warning","info"].includes(e)},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],watch:{show(e){e&&this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration))}},methods:{close(){this.timer&&clearTimeout(this.timer),this.$emit("close")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},data(){return{timer:null}}},n=s(71241);const c=(0,n.A)(i,[["render",u],["__scopeId","data-v-9f6ec8d0"]]);var o=c},65153:function(e,a,s){s.r(a),s.d(a,{default:function(){return G}});var t=s(56768),l=s(24232),r=s(90144),u=s(4249),i=s(81387),n=s(94373),c=s(10587),o=s(94348);const v={class:"reward-post-page"},d={class:"reward-post-page-wrap"},p={class:"page-header"},k={key:0,class:"post-container"},f={class:"post-card"},h={class:"post-header"},w={class:"post-author"},g={key:1,class:"system-badge"},L={class:"post-status"},m={key:0,class:"status-badge rejected"},y={key:1,class:"status-badge inactive"},b={key:2,class:"status-badge active"},E={class:"post-date"},C={key:0},R={key:1},T={class:"post-content"},X={class:"tweet-embed"},_=["href"],W={key:1,class:"blocked-tweet"},A={key:2,class:"tweet-stats"},j={class:"stat-item"},I={class:"stat-item"},$={class:"stat-item"},K={key:3,class:"tweet-stats"},Q={key:4,class:"tweet-stats"},D={key:0,class:"voting-section"},x={key:0,class:"voting-closed"},F={key:0,class:"vote-actions"},M={key:1,class:"voting-ended"},P={class:"voting-results"},S={class:"approval-bar"},V={class:"approval-stats"},B={class:"approval-text"},O={class:"approval-count"},U={class:"rejection-count"},q={key:1,class:"loading-container"};var N={__name:"RewardPostPage",setup(e){const a=(0,u.Pj)(),s=(0,i.lq)(),N=(0,t.EW)((()=>a.getters.isAuthenticated)),Y=(0,t.EW)((()=>a.state.user?.userTag)),z=(0,r.KR)(null),G=(0,r.KR)(!0),H=(0,r.KR)(!1),J=(0,r.KR)(""),Z=(0,r.KR)("info"),ee=async()=>{try{G.value=!0;const e=s.params.tweetId,a=await n.A.get(`/rewards/post/${e}`);a.data.success&&(z.value=a.data.post,ce())}catch(e){o.error("Error fetching post:",e)}finally{G.value=!1}},ae=((0,t.EW)((()=>!(!Y.value||!z.value)&&(z.value.usersApproved.includes(Y.value)||z.value.usersRejected.includes(Y.value)))),(0,t.EW)((()=>!(!Y.value||!z.value)&&z.value.usersApproved.includes(Y.value)))),se=(0,t.EW)((()=>!(!Y.value||!z.value)&&z.value.usersRejected.includes(Y.value))),te=(0,t.EW)((()=>{if(!z.value||!z.value.endedTime||z.value.checkTime)return!1;const e=new Date,a=new Date(z.value.endedTime);return a>e&&!z.value.checkTime})),le=(0,t.EW)((()=>!te.value)),re=(0,t.EW)((()=>{if(!z.value)return 50;const e=z.value.usersApproved.length,a=z.value.usersRejected.length,s=e+a;return 0===s?50:Math.round(e/s*100)})),ue=(0,t.EW)((()=>{if(!z.value)return 50;const e=z.value.usersApproved.length,a=z.value.usersRejected.length,s=e+a;return 0===s?50:Math.round(a/s*100)})),ie=(0,r.KR)(0),ne=(0,r.KR)(""),ce=()=>{if(!z.value||!z.value.endedTime)return void(ne.value="Loading...");if(!te.value)return void(ne.value="Inactive");const e=new Date,a=new Date(z.value.endedTime),s=a-e;if(s<=0)return ie.value=0,void(ne.value="Ended");const t=Math.floor(s/6e4),l=Math.floor(t/60),r=t%60;ie.value=t,ne.value=l>0?`${l}h ${r}m left`:`${r}m left`},oe=e=>{const a=new Date(e);return a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},ve=(e,a="info")=>{J.value=e,Z.value=a,H.value=!0},de=()=>{H.value=!1},pe=async e=>{if(z.value)try{const a=await n.A.post("/rewards/vote",{postId:z.value.id,approve:e});a.data.success&&(await ee(),ve(a.data.message,"success"))}catch(a){o.error("Error voting for post:",a),ve(a.response?.data?.message||"Error voting for post","error")}};let ke=null;return(0,t.sV)((()=>{ee(),ke=setInterval(ce,6e4)})),(0,t.hi)((()=>{ke&&clearInterval(ke)})),(e,a)=>{const s=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",v,[(0,t.bF)(c.A,{message:J.value,type:Z.value,show:H.value,onClose:de},null,8,["message","type","show"]),(0,t.Lk)("div",d,[(0,t.Lk)("div",p,[(0,t.bF)(s,{to:"/rewards",class:"back-link"},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,t.eW)(" Back to Rewards ")]))),_:1}),a[3]||(a[3]=(0,t.Lk)("h1",null,"Tweet Details",-1))]),z.value?((0,t.uX)(),(0,t.CE)("div",k,[(0,t.Lk)("div",f,[(0,t.Lk)("div",h,[(0,t.Lk)("div",w,[a[4]||(a[4]=(0,t.Lk)("i",{class:"fas fa-user-circle"},null,-1)),"system"!==z.value.userTag?((0,t.uX)(),(0,t.Wv)(s,{key:0,to:`/player/${z.value.userTag}`,class:"post-user"},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(z.value.userTag),1)])),_:1},8,["to"])):((0,t.uX)(),(0,t.CE)("span",g,"Official"))]),(0,t.Lk)("div",L,[z.value.approved?le.value?((0,t.uX)(),(0,t.CE)("span",y,a[6]||(a[6]=[(0,t.Lk)("i",{class:"fas fa-clock"},null,-1),(0,t.eW)(" Inactive ")]))):te.value?((0,t.uX)(),(0,t.CE)("span",b,a[7]||(a[7]=[(0,t.Lk)("i",{class:"fas fa-check"},null,-1),(0,t.eW)(" Active ")]))):(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("span",m,a[5]||(a[5]=[(0,t.Lk)("i",{class:"fas fa-ban"},null,-1),(0,t.eW)(" Rejected ")])))])]),(0,t.Lk)("div",E,[a[8]||(a[8]=(0,t.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),te.value?((0,t.uX)(),(0,t.CE)("span",C,(0,l.v_)(ne.value),1)):((0,t.uX)(),(0,t.CE)("span",R,(0,l.v_)(oe(z.value.createdAt)),1))]),(0,t.Lk)("div",T,[(0,t.Lk)("div",X,[z.value.approved?((0,t.uX)(),(0,t.CE)("a",{key:0,href:`https://twitter.com/i/status/${z.value.tweetId}`,target:"_blank",class:"tweet-link"},[a[9]||(a[9]=(0,t.Lk)("i",{class:"fab fa-twitter"},null,-1)),(0,t.eW)(" View Tweet "+(0,l.v_)(z.value.tweetId),1)],8,_)):((0,t.uX)(),(0,t.CE)("div",W,a[10]||(a[10]=[(0,t.Lk)("i",{class:"fas fa-lock"},null,-1),(0,t.eW)(" Post has been blocked due to community moderation ")]))),z.value.approved&&!te.value?((0,t.uX)(),(0,t.CE)("div",A,[(0,t.Lk)("div",j,[a[11]||(a[11]=(0,t.Lk)("i",{class:"fas fa-heart"},null,-1)),(0,t.Lk)("span",null,(0,l.v_)(z.value.usersLiked.length)+" likes",1)]),(0,t.Lk)("div",I,[a[12]||(a[12]=(0,t.Lk)("i",{class:"fas fa-reply"},null,-1)),(0,t.Lk)("span",null,(0,l.v_)(z.value.usersReplied.length)+" replies",1)]),(0,t.Lk)("div",$,[a[13]||(a[13]=(0,t.Lk)("i",{class:"fas fa-retweet"},null,-1)),(0,t.Lk)("span",null,(0,l.v_)(z.value.usersRetweeted.length)+" retweets",1)])])):(0,t.Q3)("",!0),z.value.approved&&!te.value?((0,t.uX)(),(0,t.CE)("div",K,a[14]||(a[14]=[(0,t.Lk)("p",{class:"tweet-stats-text"},"Interactions verified, rewards awarded",-1)]))):(0,t.Q3)("",!0),z.value.approved&&te.value?((0,t.uX)(),(0,t.CE)("div",Q,a[15]||(a[15]=[(0,t.Lk)("p",{class:"tweet-stats-text"},"You can interact with this tweet. After the post is finished, we will check the results and reward you",-1)]))):(0,t.Q3)("",!0)]),a[16]||(a[16]=(0,t.Fv)('<div class="reward-info" data-v-b79c3130><h3 data-v-b79c3130>Reward Info</h3><p data-v-b79c3130>Interact with this tweet to earn:</p><ul data-v-b79c3130><li data-v-b79c3130><i class="fas fa-heart" data-v-b79c3130></i> Like: +1 power</li><li data-v-b79c3130><i class="fas fa-reply" data-v-b79c3130></i> Reply: +2 power</li><li data-v-b79c3130><i class="fas fa-retweet" data-v-b79c3130></i> Retweet: +3 power</li><li data-v-b79c3130><i class="fas fa-vote-yea" data-v-b79c3130></i> Vote: +1 power</li></ul></div>',1))])]),N.value?((0,t.uX)(),(0,t.CE)("div",D,[z.value.approved?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},["system"!==z.value.userTag&&te.value?((0,t.uX)(),(0,t.CE)("div",F,[(0,t.Lk)("button",{onClick:a[0]||(a[0]=e=>pe(!0)),class:(0,l.C4)(["approve-button",{active:ae.value}])},a[18]||(a[18]=[(0,t.Lk)("i",{class:"fas fa-thumbs-up"},null,-1),(0,t.eW)(" Approve ")]),2),(0,t.Lk)("button",{onClick:a[1]||(a[1]=e=>pe(!1)),class:(0,l.C4)(["reject-button",{active:se.value}])},a[19]||(a[19]=[(0,t.Lk)("i",{class:"fas fa-thumbs-down"},null,-1),(0,t.eW)(" Reject ")]),2)])):(0,t.Q3)("",!0),le.value&&z.value.approved?((0,t.uX)(),(0,t.CE)("div",M,a[20]||(a[20]=[(0,t.Lk)("div",{class:"ended-message"},[(0,t.Lk)("i",{class:"fas fa-clock"}),(0,t.Lk)("p",null,"This post has ended and voting is closed.")],-1)]))):(0,t.Q3)("",!0)],64)):((0,t.uX)(),(0,t.CE)("div",x,a[17]||(a[17]=[(0,t.Lk)("div",{class:"rejection-message"},[(0,t.Lk)("i",{class:"fas fa-exclamation-triangle"}),(0,t.Lk)("p",null,"This post has been rejected by community moderation."),(0,t.Lk)("p",null,"Rewards were awarded to those who voted to reject the post.")],-1)]))),(0,t.Lk)("div",P,[a[21]||(a[21]=(0,t.Lk)("h3",null,"Community Voting",-1)),(0,t.Lk)("div",S,[(0,t.Lk)("div",{class:"approval-progress approval-progress--approve",style:(0,l.Tr)({width:`${re.value}%`})},null,4),(0,t.Lk)("div",{class:"approval-progress approval-progress--reject",style:(0,l.Tr)({width:`${ue.value}%`,right:0})},null,4)]),(0,t.Lk)("div",V,[(0,t.Lk)("div",B,[(0,t.Lk)("span",O,(0,l.v_)(z.value.usersApproved.length)+" approved",1),(0,t.Lk)("span",U,(0,l.v_)(z.value.usersRejected.length)+" rejected",1)])])])])):(0,t.Q3)("",!0)])):((0,t.uX)(),(0,t.CE)("div",q,a[22]||(a[22]=[(0,t.Lk)("div",{class:"loading-spinner"},[(0,t.Lk)("i",{class:"fas fa-spinner fa-spin"}),(0,t.Lk)("span",null,"Loading post...")],-1)])))])])}}},Y=s(71241);const z=(0,Y.A)(N,[["__scopeId","data-v-b79c3130"]]);var G=z}}]);
//# sourceMappingURL=5153.5d399f94.js.map