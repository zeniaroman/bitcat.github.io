"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[1804],{71241:function(a,e){e.A=(a,e)=>{const t=a.__vccOpts||a;for(const[s,o]of e)t[s]=o;return t}},10587:function(a,e,t){t.d(e,{A:function(){return d}});var s=t(56768),o=t(24232);const r={class:"toast-content"};function l(a,e,t,l,n,i){return t.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["toast",`toast-${t.type}`])},[(0,s.Lk)("div",r,(0,o.v_)(t.message),1),(0,s.Lk)("button",{class:"toast-close",onClick:e[0]||(e[0]=(...a)=>i.close&&i.close(...a))},"×")],2)):(0,s.Q3)("",!0)}var n={name:"AppToast",props:{message:{type:String,default:""},type:{type:String,default:"info",validator:a=>["success","error","warning","info"].includes(a)},duration:{type:Number,default:3e3},show:{type:Boolean,default:!1}},emits:["close"],watch:{show(a){a&&this.duration>0&&(this.timer=setTimeout((()=>{this.close()}),this.duration))}},methods:{close(){this.timer&&clearTimeout(this.timer),this.$emit("close")}},beforeUnmount(){this.timer&&clearTimeout(this.timer)},data(){return{timer:null}}},i=t(71241);const u=(0,i.A)(n,[["render",l],["__scopeId","data-v-9f6ec8d0"]]);var d=u},61804:function(a,e,t){t.r(e),t.d(e,{default:function(){return Ha}});var s=t(56768),o=t(24232);const r={class:"page-user-settings"},l={key:0,class:"auth-message"},n={key:1,class:"settings-container"},i={class:"settings-section"},u={class:"section-content"},d={class:"current-avatar"},c=["src"],v={class:"settings-section"},p={class:"section-content"},g={class:"info-item"},f={class:"info-value"},m={class:"info-item"},w={class:"info-value"},k={class:"info-item"},b={class:"info-value"},h={class:"settings-section"},L={class:"section-content"},P={class:"info-item"},y={class:"info-value"};function C(a,e,t,C,A,T){const E=(0,s.g2)("router-link"),S=(0,s.g2)("modal-popup"),_=(0,s.g2)("AppToast");return(0,s.uX)(),(0,s.CE)("div",r,[e[18]||(e[18]=(0,s.Lk)("h2",{class:"page-title"},"User Settings",-1)),C.isAuthenticated?((0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",i,[e[6]||(e[6]=(0,s.Lk)("h3",{class:"section-title"},"Profile Avatar",-1)),(0,s.Lk)("div",u,[(0,s.Lk)("div",d,[(0,s.Lk)("img",{src:C.userSettings.avatar||C.bitcatImage,alt:"User Avatar",class:"avatar-image"},null,8,c)]),(0,s.Lk)("button",{class:"action-button",onClick:e[0]||(e[0]=(...a)=>C.openAvatarModal&&C.openAvatarModal(...a))},"Change Avatar")])]),(0,s.Lk)("div",v,[e[10]||(e[10]=(0,s.Lk)("h3",{class:"section-title"},"Profile Information",-1)),(0,s.Lk)("div",p,[(0,s.Lk)("div",g,[e[7]||(e[7]=(0,s.Lk)("span",{class:"info-label"},"Bio:",-1)),(0,s.Lk)("span",f,(0,o.v_)(C.userSettings.bio||"Not set"),1)]),(0,s.Lk)("div",m,[e[8]||(e[8]=(0,s.Lk)("span",{class:"info-label"},"Telegram:",-1)),(0,s.Lk)("span",w,(0,o.v_)(C.userSettings.telegram||"Not set"),1)]),(0,s.Lk)("div",k,[e[9]||(e[9]=(0,s.Lk)("span",{class:"info-label"},"Twitter:",-1)),(0,s.Lk)("span",b,(0,o.v_)(C.userSettings.twitter||"Not set"),1)]),(0,s.Lk)("button",{class:"action-button",onClick:e[1]||(e[1]=(...a)=>C.openProfileInfoModal&&C.openProfileInfoModal(...a))},"Edit Profile Info")])]),(0,s.Q3)("",!0),(0,s.Lk)("div",h,[e[17]||(e[17]=(0,s.Lk)("h3",{class:"section-title"},[(0,s.eW)("VIP Status"),(0,s.Lk)("small",null,"(Coming Soon)")],-1)),(0,s.Lk)("div",L,[(0,s.Lk)("div",P,[e[13]||(e[13]=(0,s.Lk)("span",{class:"info-label"},"VIP Status:",-1)),(0,s.Lk)("span",y,(0,o.v_)(C.userSettings.isVip?"Yes":"No"),1),e[14]||(e[14]=(0,s.Lk)("button",{class:"action-button",disabled:""}," Get VIP (for BITCAT) ",-1)),e[15]||(e[15]=(0,s.Lk)("br",null,null,-1)),e[16]||(e[16]=(0,s.Lk)("small",null,"VIP status can be purchased once. It will distinguish you from other users and give certain advantages. In development, stay tuned for updates",-1))])])])])):((0,s.uX)(),(0,s.CE)("div",l,[e[5]||(e[5]=(0,s.Lk)("p",null,"Please login to access your settings.",-1)),(0,s.bF)(E,{to:"/my",class:"login-link"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Go to Login Page")]))),_:1})])),(0,s.bF)(S,{show:C.showModal,title:C.modalTitle,onClose:C.closeModal},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(C.currentModalComponent),{userTag:C.userTag,userSettings:C.userSettings,hasPassword:C.hasPassword,onUpdated:C.handleSettingsUpdated,onClose:C.closeModal},null,40,["userTag","userSettings","hasPassword","onUpdated","onClose"]))])),_:1},8,["show","title","onClose"]),(0,s.bF)(_,{show:C.toast.show,message:C.toast.message,type:C.toast.type,onClose:e[3]||(e[3]=a=>C.toast.show=!1),duration:C.toast.duration},null,8,["show","message","type","duration"])])}var A=t(90144),T=t(68881),E=t(94373),S=t(45130);const _={class:"modal-container"},I={class:"modal-header"},N={class:"modal-title"},F={class:"modal-content"};function R(a,e,t,r,l,n){return t.show?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:e[1]||(e[1]=(0,S.D$)(((...a)=>r.close&&r.close(...a)),["self"]))},[(0,s.Lk)("div",_,[(0,s.Lk)("div",I,[(0,s.Lk)("h3",N,(0,o.v_)(t.title),1),(0,s.Lk)("button",{class:"close-button",onClick:e[0]||(e[0]=(...a)=>r.close&&r.close(...a))},"×")]),(0,s.Lk)("div",F,[(0,s.RG)(a.$slots,"default",{},void 0,!0)])])])):(0,s.Q3)("",!0)}var X={name:"ModalPopup",props:{show:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["close"],setup(a,{emit:e}){const t=()=>{e("close")};return{close:t}}},K=t(71241);const U=(0,K.A)(X,[["render",R],["__scopeId","data-v-a0ce290a"]]);var M=U;const V={class:"avatar-form"},$={class:"avatar-preview"},B=["src"],W={class:"form-tabs"},Q={key:0,class:"nft-selection"},D={key:0,class:"loading-container"},x={key:1,class:"no-nfts-message"},J={key:2},q={class:"nft-tabs"},z={class:"nft-grid"},O=["onClick"],Y={class:"nft-image-container"},G=["src","alt"],j={class:"nft-name"},H={key:0,class:"no-nfts-message"},Z={key:1,class:"pagination"},aa=["disabled"],ea={class:"pagination-info"},ta=["disabled"],sa={class:"form-actions"},oa=["disabled"],ra=["disabled"],la=["disabled"],na={key:0,class:"loading-spinner"},ia={key:1},ua={key:2,class:"error-message"};function da(a,e,t,r,l,n){return(0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",$,[(0,s.Lk)("img",{src:r.previewUrl||t.userSettings.avatar||r.bitcatImage,alt:"Avatar Preview",class:"avatar-image"},null,8,B)]),(0,s.Lk)("div",W,[(0,s.Lk)("button",{class:(0,o.C4)(["tab-button",{active:"nft"===r.activeTab}]),onClick:e[0]||(e[0]=a=>r.activeTab="nft")}," My NFTs ",2)]),"nft"===r.activeTab?((0,s.uX)(),(0,s.CE)("div",Q,[r.loading?((0,s.uX)(),(0,s.CE)("div",D,e[10]||(e[10]=[(0,s.Lk)("div",{class:"loading-spinner large"},null,-1),(0,s.Lk)("p",null,"Loading your NFTs...",-1)]))):r.hasNfts?((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",q,[(0,s.Lk)("button",{class:(0,o.C4)(["nft-tab-button",{active:"owned"===r.activeNftTab}]),onClick:e[1]||(e[1]=a=>r.activeNftTab="owned")}," Owned ("+(0,o.v_)(r.nftsData.owned.pagination.total)+") ",3),(0,s.Lk)("button",{class:(0,o.C4)(["nft-tab-button",{active:"rented"===r.activeNftTab}]),onClick:e[2]||(e[2]=a=>r.activeNftTab="rented")}," Rented ("+(0,o.v_)(r.nftsData.rented.pagination.total)+") ",3),(0,s.Lk)("button",{class:(0,o.C4)(["nft-tab-button",{active:"created"===r.activeNftTab}]),onClick:e[3]||(e[3]=a=>r.activeNftTab="created")}," Created ("+(0,o.v_)(r.nftsData.created.pagination.total)+") ",3)]),(0,s.Lk)("div",z,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.currentNfts,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,o.C4)(["nft-item",{selected:r.selectedNft&&r.selectedNft.createdAt===a.createdAt}]),onClick:e=>r.selectNft(a)},[(0,s.Lk)("div",Y,[(0,s.Lk)("img",{src:a.imageUri,alt:a.name,class:"nft-image"},null,8,G)]),(0,s.Lk)("div",j,(0,o.v_)(a.name),1)],10,O)))),128))]),0===r.currentNfts.length?((0,s.uX)(),(0,s.CE)("div",H,e[12]||(e[12]=[(0,s.Lk)("p",null,"No NFTs found in this category.",-1)]))):(0,s.Q3)("",!0),r.showPagination?((0,s.uX)(),(0,s.CE)("div",Z,[(0,s.Lk)("button",{class:"pagination-button",disabled:1===r.currentPage,onClick:e[4]||(e[4]=a=>r.changePage(r.currentPage-1))}," Previous ",8,aa),(0,s.Lk)("span",ea,"Page "+(0,o.v_)(r.currentPage)+" of "+(0,o.v_)(r.totalPages),1),(0,s.Lk)("button",{class:"pagination-button",disabled:r.currentPage===r.totalPages,onClick:e[5]||(e[5]=a=>r.changePage(r.currentPage+1))}," Next ",8,ta)])):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",x,e[11]||(e[11]=[(0,s.Lk)("p",null,"You don't have any NFTs to use as avatar.",-1)])))])):(r.activeTab,(0,s.Q3)("",!0)),(0,s.Lk)("div",sa,[(0,s.Lk)("button",{class:"btn-cancel",onClick:e[7]||(e[7]=e=>a.$emit("close")),disabled:r.loading}," Cancel ",8,oa),(0,s.Lk)("button",{class:"btn-default",onClick:e[8]||(e[8]=(...a)=>r.setDefaultAvatar&&r.setDefaultAvatar(...a)),disabled:r.loading}," Set Default ",8,ra),(0,s.Lk)("button",{class:"btn-save",onClick:e[9]||(e[9]=(...a)=>r.saveAvatar&&r.saveAvatar(...a)),disabled:r.loading||!r.isValid},[r.loading?((0,s.uX)(),(0,s.CE)("span",na)):((0,s.uX)(),(0,s.CE)("span",ia,"Save Avatar"))],8,la)]),r.error?((0,s.uX)(),(0,s.CE)("div",ua,(0,o.v_)(r.error),1)):(0,s.Q3)("",!0)])}t(14603),t(47566),t(98721);var ca=t(29096),va=t(94348),pa={name:"AvatarForm",props:{userTag:{type:String,required:!0},userSettings:{type:Object,required:!0}},emits:["updated","close"],setup(a,{emit:e}){const t=(0,A.KR)(a.userSettings.avatar||""),o=(0,A.KR)(""),r=(0,A.KR)(!1),l=(0,A.KR)(""),n=(0,A.KR)("nft"),i=(0,A.KR)("owned"),u=(0,A.KR)({owned:{nfts:[],pagination:{total:0,totalPages:0}},rented:{nfts:[],pagination:{total:0,totalPages:0}},created:{nfts:[],pagination:{total:0,totalPages:0}}}),d=(0,A.KR)(1),c=(0,A.KR)(null),v=(0,s.EW)((()=>{if(!t.value)return!0;try{return new URL(t.value),!0}catch(a){return!1}}));(0,s.wB)(t,(a=>{a&&v.value?o.value=a:o.value="",l.value=""}));const p=async()=>{r.value=!0,l.value="";try{const t=await E.A.put(`/user-settings/${a.userTag}/avatar`,{avatar:null},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});t.data&&t.data.success?(e("updated",{avatar:null}),T.A.commit("setDefaultAvatar")):l.value="Failed to reset avatar"}catch(t){va.error("Error resetting avatar:",t),l.value=t.response?.data?.message||"Failed to reset avatar"}finally{r.value=!1}},g=async()=>{if("url"!==n.value||v.value){r.value=!0,l.value="";try{let s={};if("url"===n.value)s={avatar:t.value};else{if("nft"!==n.value||!c.value)return l.value="Please select an NFT or enter a valid URL",void(r.value=!1);s={nftMint:c.value.assetPublicKey}}const o=await E.A.put(`/user-settings/${a.userTag}/avatar`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});o.data&&o.data.success?"url"===n.value?e("updated",{avatar:t.value}):(T.A.commit("setAvatar",c.value.imageUri),e("updated",{avatar:c.value.imageUri})):l.value="Failed to update avatar"}catch(s){va.error("Error updating avatar:",s),l.value=s.response?.data?.message||"Failed to update avatar"}finally{r.value=!1}}else l.value="Please enter a valid URL"},f=async(e="owned",t=1)=>{r.value=!0,l.value="";try{const s=await E.A.get(`/nft-bitcat/user/${a.userTag}/nfts`,{params:{tab:e,page:t,limit:9}});s.data&&s.data.success?u.value=s.data:l.value="Failed to load NFTs"}catch(s){va.error("Error fetching user NFTs:",s),l.value=s.response?.data?.message||"Failed to load NFTs"}finally{r.value=!1}},m=a=>{c.value=a,o.value=a.imageUri},w=a=>{d.value=a,f(i.value,a)};(0,s.wB)(i,(a=>{d.value=1})),(0,s.wB)(n,(a=>{"nft"===a&&f(i.value,d.value)}));const k=(0,s.EW)((()=>u.value&&u.value[i.value]?.nfts||[])),b=(0,s.EW)((()=>u.value&&u.value[i.value]?.pagination?.totalPages||1)),h=(0,s.EW)((()=>b.value>1)),L=(0,s.EW)((()=>u.value.owned.pagination.total>0||u.value.rented.pagination.total>0||u.value.created.pagination.total>0));return(0,s.sV)((()=>{f(i.value,d.value)})),{avatarUrl:t,previewUrl:o,loading:r,error:l,isValid:v,activeTab:n,activeNftTab:i,nftsData:u,currentPage:d,totalPages:b,selectedNft:c,currentNfts:k,showPagination:h,hasNfts:L,saveAvatar:g,fetchUserNfts:f,selectNft:m,changePage:w,setDefaultAvatar:p,bitcatImage:ca}}};const ga=(0,K.A)(pa,[["render",da],["__scopeId","data-v-f0b09ee2"]]);var fa=ga;const ma={class:"profile-info-form"},wa={class:"form-group"},ka={class:"form-group"},ba={class:"form-group"},ha={class:"form-actions"},La=["disabled"],Pa=["disabled"],ya={key:0,class:"loading-spinner"},Ca={key:1},Aa={key:0,class:"error-message"};function Ta(a,e,t,r,l,n){return(0,s.uX)(),(0,s.CE)("div",ma,[(0,s.Lk)("div",wa,[e[5]||(e[5]=(0,s.Lk)("label",{for:"bio",class:"form-label"},"Bio",-1)),(0,s.bo)((0,s.Lk)("textarea",{id:"bio","onUpdate:modelValue":e[0]||(e[0]=a=>r.bio=a),class:"form-textarea",placeholder:"Tell us about yourself (max 500 characters)",rows:"4",maxlength:"500",autocomplete:"off"},null,512),[[S.Jo,r.bio]])]),(0,s.Lk)("div",ka,[e[6]||(e[6]=(0,s.Lk)("label",{for:"telegram",class:"form-label"},"Telegram",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"telegram","onUpdate:modelValue":e[1]||(e[1]=a=>r.telegram=a),class:"form-input",placeholder:"Your Telegram username (without @)",autocomplete:"off"},null,512),[[S.Jo,r.telegram]])]),(0,s.Lk)("div",ba,[e[7]||(e[7]=(0,s.Lk)("label",{for:"twitter",class:"form-label"},"Twitter",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"twitter","onUpdate:modelValue":e[2]||(e[2]=a=>r.twitter=a),class:"form-input",placeholder:"Your Twitter username (without @)",autocomplete:"off"},null,512),[[S.Jo,r.twitter]])]),(0,s.Lk)("div",ha,[(0,s.Lk)("button",{class:"btn-cancel",onClick:e[3]||(e[3]=e=>a.$emit("close")),disabled:r.loading}," Cancel ",8,La),(0,s.Lk)("button",{class:"btn-save",onClick:e[4]||(e[4]=(...a)=>r.saveProfileInfo&&r.saveProfileInfo(...a)),disabled:r.loading},[r.loading?((0,s.uX)(),(0,s.CE)("span",ya)):((0,s.uX)(),(0,s.CE)("span",Ca,"Save Information"))],8,Pa)]),r.error?((0,s.uX)(),(0,s.CE)("div",Aa,(0,o.v_)(r.error),1)):(0,s.Q3)("",!0)])}var Ea=t(94348),Sa={name:"ProfileInfoForm",props:{userTag:{type:String,required:!0},userSettings:{type:Object,required:!0}},emits:["updated","close"],setup(a,{emit:e}){const t=(0,A.KR)(a.userSettings.bio||""),s=(0,A.KR)(a.userSettings.telegram||""),o=(0,A.KR)(a.userSettings.twitter||""),r=(0,A.KR)(!1),l=(0,A.KR)(""),n=async()=>{r.value=!0,l.value="";try{const r=await E.A.put(`/user-settings/${a.userTag}/bio`,{bio:t.value,telegram:s.value,twitter:o.value},{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});r.data&&r.data.success?e("updated",{bio:t.value,telegram:s.value,twitter:o.value}):l.value="Failed to update profile information"}catch(n){Ea.error("Error updating profile info:",n),l.value=n.response?.data?.message||"Failed to update profile information"}finally{r.value=!1}};return{bio:t,telegram:s,twitter:o,loading:r,error:l,saveProfileInfo:n}}};const _a=(0,K.A)(Sa,[["render",Ta],["__scopeId","data-v-19baa746"]]);var Ia=_a;const Na={class:"password-form"},Fa={key:0,class:"form-group"},Ra={class:"form-group"},Xa={for:"new-password",class:"form-label"},Ka={class:"form-group"},Ua={key:0,class:"validation-error"},Ma={class:"form-actions"},Va=["disabled"],$a=["disabled"],Ba={key:0,class:"loading-spinner"},Wa={key:1},Qa={key:1,class:"error-message"};function Da(a,e,t,r,l,n){return(0,s.uX)(),(0,s.CE)("div",Na,[t.hasPassword?((0,s.uX)(),(0,s.CE)("div",Fa,[e[5]||(e[5]=(0,s.Lk)("label",{for:"current-password",class:"form-label"},"Current Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"current-password","onUpdate:modelValue":e[0]||(e[0]=a=>r.currentPassword=a),class:"form-input",placeholder:"Enter your current password"},null,512),[[S.Jo,r.currentPassword]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ra,[(0,s.Lk)("label",Xa,(0,o.v_)(t.hasPassword?"New Password":"Password"),1),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"new-password","onUpdate:modelValue":e[1]||(e[1]=a=>r.newPassword=a),class:"form-input",placeholder:"Enter new password"},null,512),[[S.Jo,r.newPassword]])]),(0,s.Lk)("div",Ka,[e[6]||(e[6]=(0,s.Lk)("label",{for:"confirm-password",class:"form-label"},"Confirm Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"confirm-password","onUpdate:modelValue":e[2]||(e[2]=a=>r.confirmPassword=a),class:"form-input",placeholder:"Confirm new password"},null,512),[[S.Jo,r.confirmPassword]]),r.passwordMismatch?((0,s.uX)(),(0,s.CE)("div",Ua," Passwords do not match ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ma,[(0,s.Lk)("button",{class:"btn-cancel",onClick:e[3]||(e[3]=e=>a.$emit("close")),disabled:r.loading}," Cancel ",8,Va),(0,s.Lk)("button",{class:"btn-save",onClick:e[4]||(e[4]=(...a)=>r.savePassword&&r.savePassword(...a)),disabled:r.loading||!r.isValid},[r.loading?((0,s.uX)(),(0,s.CE)("span",Ba)):((0,s.uX)(),(0,s.CE)("span",Wa,(0,o.v_)(t.hasPassword?"Change Password":"Set Password"),1))],8,$a)]),r.error?((0,s.uX)(),(0,s.CE)("div",Qa,(0,o.v_)(r.error),1)):(0,s.Q3)("",!0)])}var xa=t(94348),Ja={name:"PasswordForm",props:{userTag:{type:String,required:!0},hasPassword:{type:Boolean,default:!1}},emits:["updated","close"],setup(a,{emit:e}){const t=(0,A.KR)(""),o=(0,A.KR)(""),r=(0,A.KR)(""),l=(0,A.KR)(!1),n=(0,A.KR)(""),i=(0,s.EW)((()=>o.value&&r.value&&o.value!==r.value)),u=(0,s.EW)((()=>!(a.hasPassword&&!t.value)&&(!(!o.value||!r.value)&&!i.value))),d=async()=>{if(u.value){l.value=!0,n.value="";try{let s="/auth/set-password",r={userTag:a.userTag,password:o.value};a.hasPassword&&(s="/auth/change-password",r={userTag:a.userTag,currentPassword:t.value,newPassword:o.value});const l=await E.A.post(s,r,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});l.data&&l.data.success?e("updated",{passwordChanged:!0}):n.value="Failed to update password"}catch(s){xa.error("Error updating password:",s),n.value=s.response?.data?.message||"Failed to update password",403===s.response?.status&&(n.value="Current password is incorrect")}finally{l.value=!1}}};return{currentPassword:t,newPassword:o,confirmPassword:r,loading:l,error:n,passwordMismatch:i,isValid:u,savePassword:d}}};const qa=(0,K.A)(Ja,[["render",Da],["__scopeId","data-v-37c147c7"]]);var za=qa,Oa=t(10587),Ya=t(94348),Ga={name:"UserSettingsPage",components:{ModalPopup:M,AvatarForm:fa,ProfileInfoForm:Ia,PasswordForm:za,AppToast:Oa.A},setup(){const a=(0,s.EW)((()=>T.A.getters.userTag)),e=(0,s.EW)((()=>T.A.getters.isAuthenticated)),t=(0,A.KR)(!1),o=(0,A.Kh)({avatar:null,bio:null,telegram:null,twitter:null,isVip:!1}),r=(0,A.Kh)({show:!1,message:"",type:"info",duration:5e3}),l=(0,A.KR)(!1),n=(0,A.KR)(""),i=(0,A.KR)(null),u=async()=>{if(e.value)try{const e=await E.A.get(`/user-settings/${a.value}`);if(e.data&&e.data.success){const a=e.data.settings;o.avatar=a.avatar,o.bio=a.bio,o.telegram=a.telegram,o.twitter=a.twitter,o.isVip=a.isVip}const s=await E.A.get("/auth/me");s.data&&s.data.exists&&(t.value=s.data.hasPassword)}catch(s){Ya.error("Error fetching user settings:",s),r.type="error",r.message="Failed to load user settings",r.show=!0}},d=()=>{n.value="Change Avatar",i.value="AvatarForm",l.value=!0},c=()=>{n.value="Edit Profile Information",i.value="ProfileInfoForm",l.value=!0},v=()=>{n.value=t.value?"Change Password":"Set Password",i.value="PasswordForm",l.value=!0},p=()=>{l.value=!1},g=a=>{void 0!==a.avatar&&(o.avatar=a.avatar),void 0!==a.bio&&(o.bio=a.bio),void 0!==a.telegram&&(o.telegram=a.telegram),void 0!==a.twitter&&(o.twitter=a.twitter),a.passwordChanged&&(t.value=!0),r.type="success",r.message="Settings updated successfully",r.show=!0,p()};return(0,s.sV)((()=>{u()})),{userTag:a,isAuthenticated:e,userSettings:o,hasPassword:t,showModal:l,modalTitle:n,currentModalComponent:i,toast:r,openAvatarModal:d,openProfileInfoModal:c,openPasswordModal:v,closeModal:p,handleSettingsUpdated:g,bitcatImage:ca}}};const ja=(0,K.A)(Ga,[["render",C],["__scopeId","data-v-a2c5a96e"]]);var Ha=ja},29096:function(a,e,t){a.exports=t.p+"img/bitcat.cd4ff007.webp"}}]);
//# sourceMappingURL=1804.9efc839a.js.map